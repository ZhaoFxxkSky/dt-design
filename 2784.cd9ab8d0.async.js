"use strict";(self.webpackChunkdt_design=self.webpackChunkdt_design||[]).push([[2784],{5170:function(Pe,le,n){n.d(le,{NL:function(){return I},rJ:function(){return Y},ri:function(){return X},v0:function(){return e}});var _=n(17069),Z=n.n(_),v=n(25298),ae=n.n(v),ue=n(82092),E=n.n(ue),g=n(53594),Y=function(i){return i[i.PENDING=0]="PENDING",i[i.GENERATING=1]="GENERATING",i[i.DONE=2]="DONE",i[i.STOPPED=3]="STOPPED",i}({}),X=Z()(function i(m){ae()(this,i),E()(this,"id",void 0),E()(this,"assistantId",void 0),E()(this,"createdAt",void 0),E()(this,"title",void 0),E()(this,"prompts",void 0),E()(this,g.sc,!0),this.id=m.id,this.assistantId=m.assistantId,this.createdAt=m.createdAt||new Date().valueOf(),this.title=m.title,this.prompts=m.prompts||[]}),I=Z()(function i(m){ae()(this,i),E()(this,"id",void 0),E()(this,"assistantId",void 0),E()(this,"createdAt",void 0),E()(this,"title",void 0),E()(this,"messages",void 0),E()(this,g.sc,!0),this.id=m.id,this.assistantId=m.assistantId,this.createdAt=m.createdAt||new Date().valueOf(),this.title=m.title,this.messages=m.messages||[]}),e=Z()(function i(m){var w,A;ae()(this,i),E()(this,"id",void 0),E()(this,"assistantId",void 0),E()(this,"creator",void 0),E()(this,"createdAt",void 0),E()(this,"content",void 0),E()(this,"status",void 0),E()(this,g.sc,!0),this.id=m.id,this.creator=m.creator,this.assistantId=m.assistantId,this.createdAt=m.createdAt||new Date().valueOf(),this.content=(w=m.content)!==null&&w!==void 0?w:"",this.status=(A=m.status)!==null&&A!==void 0?A:Y.PENDING})},82784:function(Pe,le,n){n.d(le,{Z:function(){return hn}});var _=n(75271),Z=n(26068),v=n.n(Z),ae=n(34894),ue=n(73285),E=n(67825),g=n.n(E),Y=n(60027),X=n(82187),I=n.n(X),e=n(52676),i=["type","className","children"],m="dtc__aigc__button__global-gradient",w="secondary_linear_gradient",A="secondary_linear_gradient_hover";function Q(t){var r=t.type,u=r===void 0?"default":r,d=t.className,o=t.children,h=g()(t,i);return(0,_.useEffect)(function(){if(!document.querySelector(".".concat(m))){var y=document.createElement("div");y.style.setProperty("width","0"),y.style.setProperty("height","0"),y.className=m,y.innerHTML=(0,Y.renderToString)((0,e.jsx)("svg",{width:0,height:0,children:(0,e.jsxs)("defs",{children:[(0,e.jsxs)("linearGradient",{id:w,x1:"1.18164",y1:"3.93164",x2:"13.9881",y2:"8.54198",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#00BAC6"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#0067FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#450FDE"})]}),(0,e.jsxs)("linearGradient",{id:A,x1:"8.96582",y1:"0.96582",x2:"15.9711",y2:"3.4877",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#00BAC6"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#0067FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#450FDE"})]})]})})),document.body.appendChild(y)}},[]),(0,e.jsx)(ue.default,v()(v()({className:I()("dtc__aigc__button",d,"dtc__aigc__button--".concat(u)),ghost:!0},h),{},{children:(0,e.jsx)("span",{className:"dtc__aigc__button__text",children:o})}))}var ve=n(51709),S=n(35475),q=n(33321),B=["lineNumberStyle"];function f(t){var r=t.className,u=t.style,d=t.toolbars,o=t.copy,h=t.convert,y=t.children,P=t.options,U=P===void 0?{}:P,D=U.lineNumberStyle,M=D===void 0?{}:D,J=g()(U,B),K=(0,_.useMemo)(function(){var ge=y[0],_e=/language-(\w+)/.exec(ge.props.className||""),xe=_e?_e[1]:"SQL",he=String(ge.props.children).replace(/\n$/,"");return{value:he,language:xe}},[y]),x=K.value,$=K.language,V=(0,_.useMemo)(function(){return typeof o=="boolean"?{disabled:!o,options:{}}:{disabled:!1,options:v()({},o||{})}},[o]),me=x||"";return(0,e.jsxs)("div",{className:I()("dtc__aigc__codeblock",h&&"dtc__aigc__codeblock--convert",r),style:u,children:[(0,e.jsxs)("div",{className:"dtc__aigc__codeblock__header",children:[(0,e.jsx)("span",{className:"dtc__aigc__codeblock__language",children:$.toLocaleLowerCase()}),(0,e.jsxs)("div",{className:"dtc__aigc__codeblock__tool",children:[!V.disabled&&(0,e.jsx)(q.Z,v()({text:me},V.options)),typeof d=="function"?d():d]})]}),(0,e.jsx)(ve.Z,v()(v()({language:$.toLocaleLowerCase(),wrapLines:!0,style:v()(v()({},S.Yn),{},{'code[class*="language-"]':v()(v()({},S.Yn['code[class*="language-"]']),{},{background:h?"#F9F9FA":"#fff"}),'pre[class*="language-"]':v()(v()({},S.Yn['pre[class*="language-"]']),{},{background:h?"#F9F9FA":"#fff",margin:0,overflow:"auto",maxHeight:270,borderRadius:"0 0 4px 4px"})}),lineNumberStyle:v()({fontStyle:"normal"},M),showLineNumbers:!0},J),{},{children:me}))]})}var R=n(48305),C=n.n(R),j=n(5170),L=n(72239),H=n(45760),ee=n(63364),z=n(44877),b=n(18704),pe=n(16120);function O(t){return t.loading?(0,e.jsxs)("div",{className:"dtc__aigc__loading",children:[(0,e.jsx)("div",{}),(0,e.jsx)("div",{}),(0,e.jsx)("div",{})]}):(0,e.jsx)(e.Fragment,{children:t.children})}var oe=n(15558),ne=n.n(oe),ce=n(15359),ye=n(99216),be=n(45994),Fe=["typing","className","rehypePlugins","remarkPlugins","codeBlock","components","children","onMount"],We=["src"],Oe=(0,_.memo)(function(r){var u=r.typing,d=r.className,o=r.rehypePlugins,h=o===void 0?[]:o,y=r.remarkPlugins,P=y===void 0?[]:y,U=r.codeBlock,D=r.components,M=r.children,J=r.onMount,K=g()(r,Fe);return(0,_.useEffect)(function(){J==null||J()},[]),(0,e.jsx)(ce.D,v()(v()({className:I()("dtc__aigc__markdown",u&&"dtc__aigc__markdown--blink",d),rehypePlugins:h,remarkPlugins:[ye.Z].concat(ne()(P)),components:v()({code:function($){var V=$.children;return(0,e.jsx)("code",{className:"dtc__aigc__markdown__inlineCode",children:V})},pre:function($){var V=$.children;return(0,e.jsx)(f,v()(v()({},U),{},{children:V}))},hr:function(){return(0,e.jsx)("hr",{color:"#ebecf0",className:"dtc__aigc__markdown__hr"})},p:function($){return $.node.children.every(function(V){return V.type==="text"})?(0,e.jsx)("p",{children:$.children}):(0,e.jsx)("div",{children:$.children})},img:function($){var V=$.src,me=g()($,We);return(0,e.jsx)(be.Z,v()({className:"dtc__aigc__markdown__img",src:V},me))}},D),includeElementIndex:!0},K),{},{children:M}))},function(t,r){return!(t.typing!==r.typing||t.className!==r.className||t.children!==r.children||t.codeBlock!==r.codeBlock)});function Se(t){var r=t.current,u=t.total,d=t.onChange,o=t.style,h=t.disabled,y=r===1||h,P=r===u||h;return(0,e.jsxs)("div",{className:"dt-aigc-pagination",style:o,children:[(0,e.jsx)(b.LeftOutlined,{className:y?"arrow-disabled":"",onClick:function(){y||d(r-1)},"data-testid":"icon-left"}),(0,e.jsxs)("section",{children:[(0,e.jsx)("span",{children:r}),(0,e.jsx)("span",{children:"/"}),(0,e.jsx)("span",{children:u})]}),(0,e.jsx)(b.RightOutlined,{className:P?"arrow-disabled":"",onClick:function(){P||d(r+1)},"data-testid":"icon-right"})]})}var Be=_.createContext({chat:void 0,maxRegenerateCount:5});function Re(){return _.useContext(Be)}var we=["formatText"];function Le(t){var r=t.prompt,u=t.data,d=t.regenerate,o=t.copy,h=t.onRegenerate,y=t.onStop,P=t.onLazyRendered,U=(0,pe.Z)(fe),D=Re(),M=D.components,J=M===void 0?{}:M,K=D.messageIcons,x=D.codeBlock,$=D.rehypePlugins,V=D.remarkPlugins,me=(0,_.useState)(!1),ge=C()(me,2),_e=ge[0],xe=ge[1],he=(0,_.useRef)(function(){});function fe(se){var de=C()(se,1),Ce=de[0];Ce.isIntersecting&&xe(function(je){if(!je){var Ie=function(){return new Promise(function(pn){he.current=pn})};P==null||P(Ie)}return!0})}var k=(0,_.useState)(u.length),G=C()(k,2),te=G[0],F=G[1],N=u[te-1],l=(0,_.useMemo)(function(){return N?[N.status===j.rJ.GENERATING,N.status===j.rJ.PENDING,N.status===j.rJ.STOPPED]:[!1,!1,!1]},[N]),s=C()(l,3),a=s[0],c=s[1],p=s[2];(0,_.useEffect)(function(){F(u.length)},[u.length]);var T=(0,_.useMemo)(function(){return Object.keys(J).reduce(function(se,de){var Ce=J[de];return se[de]=function(){for(var je=arguments.length,Ie=new Array(je),Ee=0;Ee<je;Ee++)Ie[Ee]=arguments[Ee];return typeof Ce=="function"?Ce.apply(void 0,Ie.concat([{messageId:N==null?void 0:N.id,promptId:r.id}])):Ce},se},{})},[J,N==null?void 0:N.id]),re=(0,_.useMemo)(function(){return typeof o=="boolean"?{disabled:!o,options:{}}:{disabled:!1,options:v()({},o||{})}},[o]),W=function(){var de;if(re.disabled)return null;var Ce=re.options,je=Ce.formatText,Ie=g()(Ce,we),Ee=(de=je==null?void 0:je(N==null?void 0:N.content))!==null&&de!==void 0?de:N==null?void 0:N.content;return Ee?(0,e.jsx)(q.Z,v()({className:"dtc__message__icon",button:(0,e.jsx)(b.CopyOutlined,{}),text:Ee},Ie)):null};return(0,e.jsxs)("section",{className:"dtc__message__container",children:[(0,e.jsx)("div",{className:"dtc__message__avatar",children:(0,e.jsx)(b.AiAvatarColored,{})}),(0,e.jsxs)("div",{className:"dtc__message__wrapper",children:[(0,e.jsxs)("div",{className:I()("dtc__message__content",c&&"dtc__message__content--loading"),ref:U,children:[(0,e.jsx)(O,{loading:c,children:_e&&(0,e.jsx)(Oe,{typing:a,components:T,codeBlock:x,rehypePlugins:$,remarkPlugins:V,onMount:function(){he.current()},children:N==null?void 0:N.content})}),(0,e.jsxs)("div",{className:"dtc__message__footer",children:[u.length>1&&!a&&!c&&(0,e.jsx)(Se,{current:te,total:u.length,onChange:function(de){return F(de)}}),p&&(0,e.jsx)("span",{className:"dtc__message__stopText",children:"\u56DE\u7B54\u5DF2\u505C\u6B62"})]})]}),(a||c)&&(0,e.jsx)("div",{className:"dtc__message__extra",children:(0,e.jsx)(ue.default,{type:"link",className:"dtc__message__stopBtn",onClick:function(){return y==null?void 0:y(N)},icon:(0,e.jsx)(b.PauseOutlined,{style:{verticalAlign:"sub"}}),children:"\u505C\u6B62\u56DE\u7B54"})})]}),!a&&!c&&(0,e.jsxs)(H.default,{className:"dtc__message__iconGroup",align:"center",children:[W(),typeof K=="function"?K(N,r):K,d&&(0,e.jsx)(z.default,{title:"\u91CD\u65B0\u751F\u6210",getTooltipContainer:function(de){return de.parentNode},children:(0,e.jsx)("span",{className:"dtc__message__icon",onClick:function(){return h==null?void 0:h(N)},children:(0,e.jsx)(b.ReloadOutlined,{})})})]})]})}function Ue(t){var r=t.data,u=t.className,d=Re(),o=d.components,h=o===void 0?{}:o,y=d.codeBlock,P=(0,_.useMemo)(function(){return Object.keys(h).reduce(function(U,D){var M=h[D];return U[D]=function(){for(var J=arguments.length,K=new Array(J),x=0;x<J;x++)K[x]=arguments[x];return typeof M=="function"?M.apply(void 0,K.concat([{promptId:r==null?void 0:r.id}])):M},U},{})},[h,r==null?void 0:r.id]);return r!=null&&r.title?(0,e.jsx)("section",{className:I()("dtc__prompt__container",u),children:(0,e.jsx)("div",{className:"dtc__prompt__wrapper",children:(0,e.jsx)("div",{className:"dtc__prompt__content",children:(0,e.jsx)(Oe,{codeBlock:y,components:P,children:(r==null?void 0:r.title)||""})})})}):null}var Ge=(0,_.forwardRef)(function(t,r){var u,d=t.data,o=t.placeholder,h=t.scrollable,y=h===void 0?!0:h,P=t.onRegenerate,U=t.onStop,D=Re(),M=D.maxRegenerateCount,J=D.copy,K=D.regenerate,x=(0,_.useRef)(null),$=(0,_.useState)(!0),V=C()($,2),me=V[0],ge=V[1],_e=(0,_.useRef)(0);(0,_.useImperativeHandle)(r,function(){return{nativeElement:x.current,scrollToBottom:function(){_e.current=window.requestAnimationFrame(function(){var te,F;(te=x.current)===null||te===void 0||te.scrollTo({top:(F=x.current)===null||F===void 0?void 0:F.scrollHeight,left:0,behavior:"instant"})})}}});var xe=function(){if(!x.current)return!1;var te=5,F=x.current,N=F.scrollTop,l=F.clientHeight,s=F.scrollHeight;return N+l>=s-te},he=!!(Array.isArray(d)&&d.length),fe=d[d.length-1],k=he?(u=fe.messages)===null||u===void 0?void 0:u[fe.messages.length-1]:void 0;return(0,_.useLayoutEffect)(function(){var G,te=function(){x.current&&ge(xe())};return(G=x.current)===null||G===void 0||G.addEventListener("scroll",te),function(){var F;(F=x.current)===null||F===void 0||F.removeEventListener("scroll",te),window.cancelAnimationFrame(_e.current)}},[]),(0,_.useLayoutEffect)(function(){_e.current=window.requestAnimationFrame(function(){x.current&&(he?x.current.scrollTop=x.current.scrollHeight:x.current.scrollTop=0)})},[k==null?void 0:k.id]),(0,_.useLayoutEffect)(function(){_e.current=window.requestAnimationFrame(function(){x.current&&(k==null?void 0:k.status)===j.rJ.GENERATING&&me&&(x.current.scrollTop=x.current.scrollHeight)})},[k==null?void 0:k.status,k==null?void 0:k.content,me]),(0,e.jsx)("div",{className:I()("dtc__aigc__content__container",!y&&"dtc__aigc__content__container--disabled"),ref:x,children:he?(0,e.jsx)("div",{className:"dtc__aigc__content__inner__holder",children:d.map(function(G,te){var F=te===d.length-1&&G.messages.length<M;return(0,e.jsxs)(_.Fragment,{children:[(0,e.jsx)(Ue,{data:G}),(0,e.jsx)(Le,{prompt:G,data:G.messages,regenerate:typeof K=="function"?K(G,te,d):K!=null?K:F,copy:J,onRegenerate:function(l){return P==null?void 0:P(l,G)},onStop:function(l){return U==null?void 0:U(l,G)},onLazyRendered:function(l){var s=xe();l().then(function(){window.requestAnimationFrame(function(){ge(s),s&&x.current&&(x.current.scrollTop=x.current.scrollHeight)})})}})]},G.id)})}):(0,e.jsx)(_.Fragment,{children:o})})}),Ke=Ge,yn=n(79412),Ze=n(3010),ze=["className"],Je=["className"];function He(t){var r=t.className,u=g()(t,ze);return(0,e.jsx)("span",v()(v()({className:I()("dtc__icon",r)},u),{},{children:(0,e.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",children:[(0,e.jsx)("path",{fill:"url(#paint0_linear_3878_6538)",fillRule:"evenodd",d:"M17.999 3.858 3.35 9.204a1.66 1.66 0 0 0-1.095 1.458 1.66 1.66 0 0 0 .862 1.602l4.454 2.44c.27.143.593.098.808-.118l.737-.72 4.508-4.428a.677.677 0 0 1 .952.018c.26.261.26.693-.009.954l-4.562 4.473-.61.603a.68.68 0 0 0-.118.828l2.64 4.626c.315.513.845.81 1.429.81.063 0 .117 0 .18-.009a1.68 1.68 0 0 0 1.41-1.107L20.153 6a1.69 1.69 0 0 0-.404-1.764 1.64 1.64 0 0 0-1.751-.378",clipRule:"evenodd"}),(0,e.jsx)("defs",{children:(0,e.jsxs)("linearGradient",{id:"paint0_linear_3878_6538",x1:"2.25",x2:"23.921",y1:"3.75",y2:"11.552",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#00BAC6"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#0067FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#450FDE"})]})}),(0,e.jsx)("defs",{children:(0,e.jsxs)("linearGradient",{id:"paint0_linear_3878_6538_hover",x1:"2.25",x2:"23.921",y1:"3.75",y2:"11.552",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#08C4FF"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#4892FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#8A61FF"})]})})]})}))}var Ve=function(r){var u=r.className,d=g()(r,Je);return(0,e.jsx)("span",v()(v()({className:I()("dtc__icon",u)},d),{},{children:(0,e.jsxs)("svg",{width:"1em",height:"1em",viewBox:"0 0 6 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,e.jsx)("path",{d:"M0 3C0 1.34315 1.34315 0 3 0C4.65685 0 6 1.34315 6 3C6 4.65685 4.65685 6 3 6C1.34315 6 0 4.65685 0 3Z",fill:"url(#paint0_linear_5253_12831)"}),(0,e.jsx)("circle",{cx:"3",cy:"3",r:"3",fill:"url(#paint1_linear_5253_12831)"}),(0,e.jsxs)("defs",{children:[(0,e.jsxs)("linearGradient",{id:"paint0_linear_5253_12831",x1:"0",y1:"0",x2:"7.2238",y2:"2.60057",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#08C4FF"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#4892FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#8A61FF"})]}),(0,e.jsxs)("linearGradient",{id:"paint1_linear_5253_12831",x1:"0",y1:"0",x2:"7.2238",y2:"2.60057",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#08C4FF"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#4892FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#8A61FF"})]})]})]})}))},ke=["onChange","onPressEnter","onPressShiftEnter","onSubmit","button","className"];function Ye(t){var r=t.onChange,u=t.onPressEnter,d=t.onPressShiftEnter,o=t.onSubmit,h=t.button,y=t.className,P=g()(t,ke),U=function(M){r==null||r(M.target.value)};return(0,e.jsxs)("div",{className:"dtc__chat__textarea__container",children:[(0,e.jsx)(Ze.default.TextArea,v()(v()({className:I()("dtc__chat__textarea",y)},P),{},{onChange:U,onPressEnter:function(M){M.persist(),M.preventDefault(),M.shiftKey?(r==null||r(P.value+`
`),d==null||d(M)):u==null||u(M)},autoSize:{minRows:2,maxRows:7}})),h!=null&&h.disabled?(0,e.jsx)(b.SendFilled,{disabled:!0,className:"dtc__chat__textarea__send"}):(0,e.jsx)(He,{className:I()("dtc__chat__textarea__send"),onClick:function(){return o==null?void 0:o(P.value)}})]})}var Xe=["className","children"],Qe=function(r){var u=r.className,d=r.children,o=g()(r,Xe);return(0,e.jsxs)("div",v()(v()({className:I()("dtc__tag",u)},o),{},{children:[(0,e.jsx)(Ve,{className:"dtc__tag__icon"}),d]}))},qe=Qe,en=n(90228),$e=n.n(en),nn=n(87999),tn=n.n(nn),rn=n(17069),Te=n.n(rn),sn=n(25298),Ae=n.n(sn),on=n(21742),De=n.n(on),an=n(83136),Me=n.n(an),Ne=n(53594),ln=n(44367),un=function(t){De()(u,t);var r=Me()(u);function u(){return Ae()(this,u),r.apply(this,arguments)}return Te()(u)}(j.ri),cn=function(t){De()(u,t);var r=Me()(u);function u(){return Ae()(this,u),r.apply(this,arguments)}return Te()(u)}(j.NL),dn=function(t){De()(u,t);var r=Me()(u);function u(){return Ae()(this,u),r.apply(this,arguments)}return Te()(u)}(j.v0),vn=function(r){return(r+1)%1e6};function mn(t){var r=(0,_.useReducer)(vn,0),u=C()(r,2),d=u[1],o=(0,_.useRef)(void 0),h=(0,ln.Z)({onTyping:function(s){fe(y.current.promptId,y.current.messageId,{content:s})}}),y=(0,_.useRef)({promptId:"",messageId:""}),P=(0,_.useRef)(!1);function U(l,s){h.start(),fe(l,s,{status:j.rJ.PENDING}),y.current={promptId:l,messageId:s}}function D(l,s,a){if(l===y.current.promptId&&s===y.current.messageId){var c;h.push(a),((c=k(l,s))===null||c===void 0?void 0:c.status)!==j.rJ.GENERATING&&fe(l,s,{status:j.rJ.GENERATING})}}function M(l,s){P.current=!0,h.close().then(function(){P.current=!1,fe(l,s,{status:j.rJ.DONE})})}function J(l){var s,a=(t==null||(s=t.ctor)===null||s===void 0?void 0:s.Conversation)||un;o.current=new a(l),d()}function K(){o.current=void 0,d()}function x(l){o.current&&(o.current=(0,Ne.Uy)(o.current,function(s){Object.assign(s,l)}),d())}function $(){return o.current}function V(){for(var l,s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];if(o.current){var p=(t==null||(l=t.ctor)===null||l===void 0?void 0:l.Prompt)||cn;o.current=(0,Ne.Uy)(o.current,function(T){var re;(re=T.prompts)===null||re===void 0||re.push(new p(a[0]))}),d()}}function me(l){o.current&&(o.current=(0,Ne.Uy)(o.current,function(s){var a,c,p=(a=s.prompts)===null||a===void 0?void 0:a.findIndex(function(T){return T.id===l});p!==-1&&((c=s.prompts)===null||c===void 0||c.splice(p,1))}),d())}function ge(l,s){o.current&&(o.current=(0,Ne.Uy)(o.current,function(a){var c=a.prompts.find(function(p){return p.id===l});c&&(typeof s=="function"?Object.assign(c,s(c)):Object.assign(c,s))}),d())}function _e(l){var s;return(s=o.current)===null||s===void 0||(s=s.prompts)===null||s===void 0?void 0:s.find(function(a){return typeof l=="function"?l(a):a.id===l})}function xe(l){for(var s,a=arguments.length,c=new Array(a>1?a-1:0),p=1;p<a;p++)c[p-1]=arguments[p];if(o.current){var T=(t==null||(s=t.ctor)===null||s===void 0?void 0:s.Message)||dn;o.current=(0,Ne.Uy)(o.current,function(re){var W=re.prompts.find(function(se){return se.id===l});W&&W.messages.push(new T(c[0]))}),d()}}function he(l,s){o.current&&(o.current=(0,Ne.Uy)(o.current,function(a){var c,p,T=a.prompts.find(function(W){return W.id===l});if(T){var re=(c=T.messages)===null||c===void 0?void 0:c.findIndex(function(W){return W.id===s});re!==-1&&((p=T.messages)===null||p===void 0||p.splice(re,1))}}),d())}function fe(l,s,a,c){o.current&&(o.current=(0,Ne.Uy)(o.current,function(p){var T,re=p.prompts.find(function(se){return se.id===l}),W=re==null||(T=re.messages)===null||T===void 0?void 0:T.find(function(se){return se.id===s});W&&(typeof a=="function"?Object.assign(W,a(W)):Object.assign(W,a))}),c!==!1&&d())}function k(l,s){var a;return(a=o.current)===null||a===void 0||(a=a.prompts)===null||a===void 0||(a=a.find(function(c){return c.id===l}))===null||a===void 0||(a=a.messages)===null||a===void 0?void 0:a.find(function(c){return c.id===s})}function G(){var l,s,a,c=(l=o.current)===null||l===void 0||(l=l.prompts)===null||l===void 0?void 0:l[((s=o.current)===null||s===void 0?void 0:s.prompts.length)-1],p=c==null||(a=c.messages)===null||a===void 0?void 0:a[c.messages.length-1];return p?p.status===j.rJ.PENDING||p.status===j.rJ.GENERATING:!1}function te(){return F.apply(this,arguments)}function F(){return F=tn()($e()().mark(function l(){var s,a,c,p,T;return $e()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(p=(s=o.current)===null||s===void 0||(s=s.prompts)===null||s===void 0?void 0:s[((a=o.current)===null||a===void 0?void 0:a.prompts.length)-1],T=p==null||(c=p.messages)===null||c===void 0?void 0:c[p.messages.length-1],(T==null?void 0:T.status)!==j.rJ.GENERATING){W.next=8;break}return W.next=5,h.close(!0);case 5:P.current&&fe(p.id,T.id,{status:j.rJ.DONE}),W.next=9;break;case 8:h.stop();case 9:return W.abrupt("return",$());case 10:case"end":return W.stop()}},l)})),F.apply(this,arguments)}function N(l){if(o.current=l,P.current=!1,G()){var s,a,c=$(),p=c==null||(s=c.prompts)===null||s===void 0?void 0:s[(c==null?void 0:c.prompts.length)-1],T=p==null||(a=p.messages)===null||a===void 0?void 0:a[p.messages.length-1];if(!p||!T)return o.current;h.start(T.content),y.current={promptId:p.id,messageId:T.id}}return d(),o.current}return{conversation:{create:J,remove:K,update:x,get:$},prompt:{create:V,remove:me,update:ge,get:_e},message:{create:xe,remove:he,update:fe,get:k},loading:G,start:U,push:D,close:M,stop:h.stop,isTyping:h.isTyping,saveViewState:te,restoreViewState:N}}var _n=n(80127);function fn(t){var r=t.icon,u=r===void 0?(0,e.jsx)(b.AiAvatarColored,{style:{fontSize:24}}):r,d=t.title,o=t.description,h=t.className,y=t.style;return(0,e.jsx)("div",{className:I()("dtc__welcome",h),style:y,children:(0,e.jsxs)("div",{className:"dtc__welcome__content",children:[(0,e.jsxs)(_n.Z,{gap:8,align:"center",children:[u,(0,e.jsx)("span",{className:"dtc__welcome__title",children:d})]}),(0,e.jsx)("div",{className:"dtc__welcome__description",children:o})]})})}var gn=5;function ie(t){var r=t.chat,u=t.components,d=t.maxRegenerateCount,o=d===void 0?gn:d,h=t.regenerate,y=t.copy,P=t.codeBlock,U=t.messageIcons,D=t.rehypePlugins,M=t.remarkPlugins,J=t.children;return(0,e.jsx)(Be.Provider,{value:{chat:r,components:u,maxRegenerateCount:o,copy:y,codeBlock:P,messageIcons:U,regenerate:h,rehypePlugins:D,remarkPlugins:M},children:J})}ie.useChat=mn,ie.useContext=Re,ie.Loading=O,ie.Button=Q,ie.CodeBlock=f,ie.Input=Ye,ie.Markdown=Oe,ie.Pagination=Se,ie.Message=Le,ie.Prompt=Ue,ie.Content=Ke,ie.Tag=qe,ie.Welcome=fn;var hn=ie},33321:function(Pe,le,n){n.d(le,{Z:function(){return Q}});var _=n(26068),Z=n.n(_),v=n(63364),ae=n(44877),ue=n(59439),E=n(82983),g=n(75271),Y=n(29520),X=n(18704),I=n(82187),e=n.n(I),i=n(82545),m=n(10118),w=n(52676),A=function(S){var q=(0,i.Z)("Copy"),B=S.button,f=B===void 0?(0,w.jsx)(X.CopyOutlined,{className:"dt-copy__default-icon"}):B,R=S.text,C=S.tooltip,j=C===void 0?q.copy:C,L=S.style,H=S.className,ee=S.disabled,z=ee===void 0?!1:ee,b=S.onCopy,pe=b===void 0?function(){return E.default.success(q.copied)}:b,O=function(){z||new Y.X0().copy(R,function(){return pe(R)})},oe=function(){return(0,w.jsx)("span",{className:e()(["dt-copy",{"dt-copy--disabled":z},H]),style:L,onClick:function(){return O()},children:f})},ne=(0,m.Z)(j);return(0,w.jsx)(ae.default,Z()(Z()({},ne),{},{children:oe()}))},Q=A},80127:function(Pe,le,n){n.d(le,{Z:function(){return I}});var _=n(26068),Z=n.n(_),v=n(67825),ae=n.n(v),ue=n(75271),E=n(82187),g=n.n(E),Y=n(52676),X=["className","vertical","wrap","justify","align","flex","gap","style","children"],I=(0,ue.forwardRef)(function(i,m){var w=i.className,A=i.vertical,Q=A===void 0?!1:A,ve=i.wrap,S=ve===void 0?"nowrap":ve,q=i.justify,B=q===void 0?"normal":q,f=i.align,R=f===void 0?"normal":f,C=i.flex,j=C===void 0?"normal":C,L=i.gap,H=L===void 0?0:L,ee=i.style,z=i.children,b=ae()(i,X);return(0,Y.jsx)("section",Z()(Z()({className:g()("dt-flex",w,Q&&"dt-flex__vertical"),style:Z()({flexWrap:S,justifyContent:B,alignItems:R,flex:j,gap:H},ee),ref:m},b),{},{children:z}))})},45994:function(Pe,le,n){var _=n(40409),Z=n.n(_),v=n(93500),ae=n(67825),ue=n.n(ae),E=n(26068),g=n.n(E),Y=n(48305),X=n.n(Y),I=n(75271),e=n(16120),i=n(52676),m=["src","className","style"],w=["src","className","style","loader"];function A(B){return new Promise(function(f,R){var C=new Image;C.onload=function(){return f(!0)},C.onerror=R,C.src=B})}function Q(B){var f=B.src,R=I.useState(!0),C=X()(R,2),j=C[0],L=C[1],H=I.useState(void 0),ee=X()(H,2),z=ee[0],b=ee[1];return I.useEffect(function(){A(f).then(function(){L(!1),b(f)}).finally(function(){L(!1)})},[f]),{isLoading:j,src:z}}var ve=function(f){var R=f.lazy;return R?(0,i.jsx)(S,g()({},f)):(0,i.jsx)(q,g()({},f))},S=function(f){var R=f.src,C=f.className,j=f.style,L=ue()(f,m),H=(0,e.Z)(function(ee){var z=X()(ee,1),b=z[0],pe=b.target,O=b.isIntersecting;if(O){var oe,ne=pe;ne.src=(oe=ne.dataset.src)!==null&&oe!==void 0?oe:"",ne.onload=function(){ne.style.opacity="1"}}});return(0,i.jsx)("img",g()(g()({className:C,style:j,ref:H},L),{},{"data-src":R}))},q=function(f){var R=f.src,C=f.className,j=f.style,L=f.loader,H=L===void 0?(0,i.jsx)(v.default,{spinning:!0}):L,ee=ue()(f,w),z=Q({src:R}),b=z.src,pe=z.isLoading;return b?(0,i.jsx)("img",g()(g()({},ee),{},{className:C,style:j,src:b})):pe?H:null};le.Z=ve},16120:function(Pe,le,n){var _=n(48305),Z=n.n(_),v=n(75271),ae=function(E){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Y=(0,v.useRef)(null),X=g.threshold,I=X===void 0?0:X,e=g.root,i=e===void 0?null:e,m=g.rootMargin,w=m===void 0?"0%":m,A=g.freezeOnceVisible,Q=A===void 0?!1:A,ve=(0,v.useState)(),S=Z()(ve,2),q=S[0],B=S[1],f=(q==null?void 0:q.isIntersecting)&&Q,R=function(j,L){B(j[0]),E(j,L)};return(0,v.useEffect)(function(){var C=Y.current,j=!!window.IntersectionObserver;if(!(f||!C)){if(!j){var L,H,ee={boundingClientRect:(L=C.getBoundingClientRect())!==null&&L!==void 0?L:null,intersectionRatio:1,intersectionRect:(H=C.getBoundingClientRect())!==null&&H!==void 0?H:null,isIntersecting:!0,rootBounds:null,target:C,time:Date.now()};R([ee],null)}var z=new IntersectionObserver(R,{threshold:I,root:i,rootMargin:w});return z.observe(C),function(){return z.disconnect()}}},[JSON.stringify(I),i,w,f]),Y};le.Z=ae},44367:function(Pe,le,n){n.d(le,{Z:function(){return X}});var _=n(90228),Z=n.n(_),v=n(87999),ae=n.n(v),ue=n(48305),E=n.n(ue),g=n(75271),Y=50;function X(I){var e=I.onTyping,i=(0,g.useRef)(),m=(0,g.useRef)(""),w=(0,g.useRef)(1),A=(0,g.useRef)(0),Q=(0,g.useRef)(!1),ve=(0,g.useState)(!1),S=E()(ve,2),q=S[0],B=S[1],f=(0,g.useRef)(!1),R=(0,g.useRef)(0);function C(){var O=m.current.length-A.current-1,oe=1e3/Y;w.current=Math.ceil(O/oe)}function j(){var O=m.current.slice(A.current),oe=O.slice(0,w.current),ne=/<[a-zA-Z]{0,4}\s[^<]*>/;if(ne.test(O)&&!ne.test(oe)){var ce=O.match(ne),ye=ce[0],be=O.indexOf(ye);return A.current+be+ye.length}return A.current+w.current}function L(){i.current||(i.current=window.setInterval(function(){if(A.current<m.current.length){var O=m.current,oe=j(),ne=O.slice(0,oe);e(ne),A.current=ne.length}else Q.current||(window.clearInterval(i.current),i.current=0,B(!1),f.current=!1)},Y))}(0,g.useEffect)(function(){return function(){window.clearInterval(i.current),window.clearInterval(R.current),i.current=0}},[]);function H(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";Q.current=!0,B(!0),window.clearInterval(i.current),i.current=0,m.current=O,A.current=O.length}function ee(O){Q.current&&(O.startsWith("n")&&m.current.endsWith("\\")?m.current=m.current.slice(0,-1)+`
`+O.slice(1).replace(/\\n/g,`
`):m.current+=O.replace(/\\n/g,`
`),C(),L())}function z(O){return b.apply(this,arguments)}function b(){return b=ae()(Z()().mark(function O(oe){return Z()().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(!oe){ce.next=10;break}window.clearInterval(R.current),window.clearInterval(i.current),i.current=0,e(m.current),B(!1),f.current=!1,Q.current=!1,ce.next=14;break;case 10:return Q.current=!1,f.current=!0,window.clearInterval(R.current),ce.abrupt("return",new Promise(function(ye){i.current?R.current=window.setInterval(function(){f.current||(ye(),f.current=!0,window.clearInterval(R.current))},1e3):(ye(),f.current=!1,B(!1),window.clearInterval(R.current))}));case 14:case"end":return ce.stop()}},O)})),b.apply(this,arguments)}function pe(){Q.current=!1,B(!1),f.current=!1,i.current&&(window.clearInterval(i.current),i.current=0),m.current="",A.current=0}return{start:H,push:ee,close:z,stop:pe,isTyping:q}}}}]);
