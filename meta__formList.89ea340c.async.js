"use strict";(self.webpackChunk_dtjoy_dt_design=self.webpackChunk_dtjoy_dt_design||[]).push([[7384],{98556:function(a,e,n){n.r(e),n.d(e,{demos:function(){return d}});var t=n(75271),d={"formlist-demo-basic":{component:t.memo(t.lazy(function(){return Promise.all([n.e(7779),n.e(5959),n.e(6299),n.e(1111),n.e(6104),n.e(1708),n.e(4957),n.e(3780),n.e(4755),n.e(1821),n.e(1995),n.e(6402),n.e(6805),n.e(9235),n.e(7700),n.e(4826),n.e(9255),n.e(648),n.e(5761),n.e(2256),n.e(1576),n.e(8170)]).then(n.bind(n,19127))})),asset:{type:"BLOCK",id:"formlist-demo-basic",refAtomIds:["formList"],dependencies:{"index.tsx":{type:"FILE",value:n(79205).Z},react:{type:"NPM",value:"18.3.1"},"@dtjoy/dt-design":{type:"NPM",value:"1.0.3"},antd:{type:"NPM",value:"4.24.16"},"./data.ts":{type:"FILE",value:n(64237).Z},"@faker-js/faker":{type:"NPM",value:"7.6.0"}},entry:"index.tsx",title:"\u57FA\u672C\u4F7F\u7528",description:"\u57FA\u672C\u4F7F\u7528\u3002"},context:void 0,renderOpts:void 0},"formlist-demo-related":{component:t.memo(t.lazy(function(){return Promise.all([n.e(7779),n.e(5959),n.e(6299),n.e(1111),n.e(6104),n.e(1708),n.e(4957),n.e(3780),n.e(4755),n.e(1821),n.e(1995),n.e(6402),n.e(6805),n.e(9235),n.e(7700),n.e(4826),n.e(9255),n.e(648),n.e(5761),n.e(2256),n.e(1576),n.e(8170)]).then(n.bind(n,42309))})),asset:{type:"BLOCK",id:"formlist-demo-related",refAtomIds:["formList"],dependencies:{"index.tsx":{type:"FILE",value:n(98197).Z},react:{type:"NPM",value:"18.3.1"},"@dtjoy/dt-design":{type:"NPM",value:"1.0.3"},antd:{type:"NPM",value:"4.24.16"},"./data.ts":{type:"FILE",value:n(64237).Z},"@faker-js/faker":{type:"NPM",value:"7.6.0"}},entry:"index.tsx",title:"\u8054\u52A8\u66F4\u65B0",description:"\u5982\u679C\u6027\u522B\u662F\u7537\u6027\u5C55\u793A\u4F53\u91CD\uFF0C\u5426\u5219\u4E0D\u5C55\u793A\u3002"},context:void 0,renderOpts:void 0},"formlist-demo-check":{component:t.memo(t.lazy(function(){return Promise.all([n.e(7779),n.e(5959),n.e(6299),n.e(1111),n.e(6104),n.e(1708),n.e(4957),n.e(3780),n.e(4755),n.e(1821),n.e(1995),n.e(6402),n.e(6805),n.e(9235),n.e(7700),n.e(4826),n.e(9255),n.e(648),n.e(5761),n.e(2256),n.e(1576),n.e(8170)]).then(n.bind(n,55935))})),asset:{type:"BLOCK",id:"formlist-demo-check",refAtomIds:["formList"],dependencies:{"index.tsx":{type:"FILE",value:n(25742).Z},react:{type:"NPM",value:"18.3.1"},"@dtjoy/dt-design":{type:"NPM",value:"1.0.3"},antd:{type:"NPM",value:"4.24.16"},"./data.ts":{type:"FILE",value:n(64237).Z},"@faker-js/faker":{type:"NPM",value:"7.6.0"}},entry:"index.tsx",title:"\u914D\u7F6E\u53EF\u9009\u62E9\u9879",description:"\u52FE\u9009\u7981\u7528\u5F53\u524D\u884C\u7684\u76F8\u5173\u8F93\u5165\u6846\u3002"},context:void 0,renderOpts:void 0},"formlist-demo-rules":{component:t.memo(t.lazy(function(){return Promise.all([n.e(7779),n.e(5959),n.e(6299),n.e(1111),n.e(6104),n.e(1708),n.e(4957),n.e(3780),n.e(4755),n.e(1821),n.e(1995),n.e(6402),n.e(6805),n.e(9235),n.e(7700),n.e(4826),n.e(9255),n.e(648),n.e(5761),n.e(2256),n.e(1576),n.e(8170)]).then(n.bind(n,60602))})),asset:{type:"BLOCK",id:"formlist-demo-rules",refAtomIds:["formList"],dependencies:{"index.tsx":{type:"FILE",value:n(20986).Z},react:{type:"NPM",value:"18.3.1"},"@dtjoy/dt-design":{type:"NPM",value:"1.0.3"},antd:{type:"NPM",value:"4.24.16"},"./data.ts":{type:"FILE",value:n(64237).Z},"@faker-js/faker":{type:"NPM",value:"7.6.0"}},entry:"index.tsx",title:"\u8054\u52A8\u89C4\u5219\u6821\u9A8C",description:"\u53EA\u6709\u6027\u522B\u4E3A\u7537\u6027\u65F6\uFF0C\u624D\u9700\u8981\u586B\u5199\u5730\u5740\u3002"},context:void 0,renderOpts:void 0}}},85316:function(a,e,n){n.r(e),n.d(e,{texts:function(){return t}});const t=[{value:"FormList \u662F\u52A8\u6001\u589E\u5220\u7684\u6570\u7EC4\u7C7B\u8868\u5355\u9879",paraId:0,tocIndex:0},{value:"\u9002\u7528\u4E8E\u52A8\u6001\u589E\u5220\u7684\u6570\u7EC4\u7C7B\u8868\u5355\u9879",paraId:1,tocIndex:1},{value:"\u901A\u8FC7\u663E\u5F0F\u58F0\u660E ",paraId:2,tocIndex:8},{value:"required",paraId:2,tocIndex:8},{value:" \u6216\u81EA\u52A8\u63A2\u6D4B ",paraId:2,tocIndex:8},{value:"rules",paraId:2,tocIndex:8},{value:" \u4E2D\u662F\u5426\u5B58\u5728 ",paraId:2,tocIndex:8},{value:"required",paraId:2,tocIndex:8},{value:" \u4E3A ",paraId:2,tocIndex:8},{value:"true",paraId:2,tocIndex:8},{value:" \u7684\u9879",paraId:2,tocIndex:8},{value:"\u53C2\u6570",paraId:3,tocIndex:10},{value:"\u8BF4\u660E",paraId:3,tocIndex:10},{value:"\u7C7B\u578B",paraId:3,tocIndex:10},{value:"\u9ED8\u8BA4\u503C",paraId:3,tocIndex:10},{value:"name",paraId:3,tocIndex:10},{value:"\u7EE7\u627F\u81EA ",paraId:3,tocIndex:10},{value:"Form.Item",paraId:3,tocIndex:10},{value:"-",paraId:3,tocIndex:10},{value:"-",paraId:3,tocIndex:10},{value:"rules",paraId:3,tocIndex:10},{value:"\u7EE7\u627F\u81EA ",paraId:3,tocIndex:10},{value:"Form.Item",paraId:3,tocIndex:10},{value:"-",paraId:3,tocIndex:10},{value:"-",paraId:3,tocIndex:10},{value:"initialValue",paraId:3,tocIndex:10},{value:"\u7EE7\u627F\u81EA ",paraId:3,tocIndex:10},{value:"Form.Item",paraId:3,tocIndex:10},{value:"-",paraId:3,tocIndex:10},{value:"-",paraId:3,tocIndex:10},{value:"columns",paraId:3,tocIndex:10},{value:"\u8868\u683C\u5217",paraId:3,tocIndex:10},{value:"\u914D\u7F6E\u9879",paraId:4,tocIndex:10},{value:"-",paraId:3,tocIndex:10},{value:"-",paraId:3,tocIndex:10},{value:"tableClassName",paraId:3,tocIndex:10},{value:"\u7EE7\u627F\u81EA ",paraId:3,tocIndex:10},{value:"Table",paraId:3,tocIndex:10},{value:" \u7684 ",paraId:3,tocIndex:10},{value:"className",paraId:3,tocIndex:10},{value:"-",paraId:3,tocIndex:10},{value:"-",paraId:3,tocIndex:10},{value:"\u5176\u4F59\u5C5E\u6027\u5747\u5373\u6210\u81EA ",paraId:5,tocIndex:10},{value:"Table",paraId:5,tocIndex:10},{value:" \u7EC4\u4EF6\uFF0C\u53C2\u8003 ",paraId:5,tocIndex:10},{value:`Table
API`,paraId:5,tocIndex:10},{value:"\u7EE7\u627F\u5168\u90E8 ",paraId:6,tocIndex:11},{value:"Form.Item",paraId:6,tocIndex:11},{value:" \u4EE5\u53CA ",paraId:6,tocIndex:11},{value:"ColumnType",paraId:6,tocIndex:11},{value:" \u7C7B\u578B, \u4EE5\u4E0B\u7C7B\u578B\u6709\u6240\u4E0D\u540C",paraId:6,tocIndex:11},{value:"\u53C2\u6570",paraId:7,tocIndex:11},{value:"\u8BF4\u660E",paraId:7,tocIndex:11},{value:"\u7C7B\u578B",paraId:7,tocIndex:11},{value:"\u9ED8\u8BA4\u503C",paraId:7,tocIndex:11},{value:"dependencies",paraId:7,tocIndex:11},{value:"\u652F\u6301\u56DE\u8C03\u51FD\u6570\u5F62\u5F0F\u83B7\u53D6\u5F53\u524D\u5B57\u6BB5\u540D\uFF0C\u8BE6\u89C1",paraId:7,tocIndex:11},{value:"Demo",paraId:8,tocIndex:11},{value:"-",paraId:7,tocIndex:11},{value:"-",paraId:7,tocIndex:11},{value:"rules",paraId:7,tocIndex:11},{value:"\u652F\u6301\u56DE\u8C03\u51FD\u6570\u5F62\u5F0F\u83B7\u53D6\u5F53\u524D\u5B57\u6BB5\u540D\uFF0C\u8BE6\u89C1",paraId:7,tocIndex:11},{value:"Demo",paraId:9,tocIndex:11},{value:"-",paraId:7,tocIndex:11},{value:"-",paraId:7,tocIndex:11},{value:"render",paraId:7,tocIndex:11},{value:"\u751F\u6210\u590D\u6742\u6570\u636E\u7684\u6E32\u67D3\u51FD\u6570\uFF0C\u8BE6\u89C1",paraId:7,tocIndex:11},{value:"Demo",paraId:10,tocIndex:11},{value:"(record, namePath, form) => React.ReactNode",paraId:7,tocIndex:11},{value:"-",paraId:7,tocIndex:11}]},79205:function(a,e){e.Z=`import React, { useEffect, useState } from 'react';
import { FormList } from '@dtjoy/dt-design';
import { Button, Form, Input, message, Space } from 'antd';

import getMockData from './data';

export default () => {
    const [form] = Form.useForm();

    const [loading, setLoading] = useState(false);

    const getData = () => {
        setLoading(true);
        getMockData()
            .then((values) => {
                form.setFieldValue('data', values);
            })
            .finally(() => {
                setLoading(false);
            });
    };

    const handleSubmit = () => {
        form.validateFields().then((values) => {
            console.log(values);
        });
    };

    useEffect(() => {
        getData();
    }, []);

    return (
        <Space direction="vertical" size={8} align="center" style={{ marginBottom: 8 }}>
            <Form form={form} layout="vertical">
                <FormList
                    name="data"
                    loading={loading}
                    scroll={{
                        y: 280,
                    }}
                    columns={[
                        {
                            key: 'name',
                            title: 'Name',
                            dataIndex: 'name',
                            required: true,
                            rules: [
                                {
                                    required: true,
                                    message: 'Please Input Name!',
                                },
                            ],
                            render: () => <Input placeholder="Name" />,
                        },
                        {
                            key: 'gender',
                            title: 'gender',
                            dataIndex: 'gender',
                            render: () => {
                                return <Input disabled />;
                            },
                        },
                        {
                            key: 'address',
                            title: 'Address',
                            dataIndex: 'address',
                            render: () => <Input placeholder="Address" />,
                        },
                        {
                            key: 'company',
                            title: 'Company',
                            dataIndex: 'company',
                            render: () => <Input placeholder="Company" />,
                        },
                        {
                            key: 'op',
                            title: 'Configuration',
                            render: ({ name }) => (
                                <Button
                                    type="link"
                                    onClick={() =>
                                        message.info(
                                            JSON.stringify(form.getFieldValue(['data', name]))
                                        )
                                    }
                                >
                                    Configuration
                                </Button>
                            ),
                        },
                    ]}
                />
            </Form>
            <Button type="primary" onClick={handleSubmit}>
                Submit
            </Button>
        </Space>
    );
};
`},25742:function(a,e){e.Z=`import React, { useEffect, useMemo, useState } from 'react';
import { Button, Flex, FormList } from '@dtjoy/dt-design';
import { Form, Input, message, Space } from 'antd';

import getMockData, { MockData } from './data';

export default () => {
    const [form] = Form.useForm<{ data: MockData[] }>();
    const [rowKeys, setRowKeys] = useState<string[]>([]);

    const [loading, setLoading] = useState(false);

    const getData = () => {
        setLoading(true);
        getMockData()
            .then((values) => {
                form.setFieldValue('data', values);
            })
            .finally(() => {
                setLoading(false);
            });
    };

    useEffect(() => {
        getData();
    }, []);

    // \u5C06 uuidList \u8F6C\u6210 Form.List \u6240\u9700\u8981\u7684 idxList
    const selectedRowKeys = useMemo(
        () => rowKeys.map((id) => form.getFieldsValue().data?.findIndex((i) => i.uuid === id)),
        [rowKeys]
    );

    return (
        <Form form={form} layout="vertical" style={{ height: 400 }}>
            <FormList
                name="data"
                loading={loading}
                scroll={{
                    y: 280,
                }}
                rowSelection={{
                    selectedRowKeys,
                    onChange: (keys) => {
                        setRowKeys(
                            form
                                .getFieldsValue()
                                .data.filter((_, idx) => keys.includes(idx))
                                .map((row) => row.uuid)
                        );
                    },
                }}
                columns={[
                    {
                        key: 'name',
                        title: 'Name',
                        dataIndex: 'name',
                        rules: [
                            {
                                required: true,
                                message: 'Please Input Name!',
                            },
                        ],
                        render: ({ name }) => (
                            <Input
                                disabled={rowKeys.includes(
                                    form.getFieldValue(['data', name, 'uuid'])
                                )}
                                placeholder="Name"
                            />
                        ),
                    },
                    {
                        key: 'address',
                        title: 'Address',
                        dataIndex: 'address',
                        render: () => <Input placeholder="Address" />,
                    },
                    {
                        key: 'company',
                        title: 'Company',
                        dataIndex: 'company',
                        render: () => <Input placeholder="Company" />,
                    },
                ]}
                footer={() => (
                    <Flex gap={8}>
                        <Button
                            onClick={() => {
                                message.success(\`\u6279\u91CF\u5220\u9664: \${selectedRowKeys.toString()} \u884C\`);
                            }}
                        >
                            \u6279\u91CF\u5220\u9664
                        </Button>
                    </Flex>
                )}
            />
        </Form>
    );
};
`},64237:function(a,e){e.Z=`import { faker } from '@faker-js/faker';

export type MockData = {
    uuid: string;
    name: string;
    address: string;
    company: string;
    gender: string;
    weight: number;
};

export default async function getMockData() {
    return new Promise<MockData[]>((resolve) => {
        setTimeout(() => {
            const data = Array.from({ length: 5 }).map(() => {
                return {
                    uuid: faker.datatype.uuid(),
                    name: faker.internet.userName(),
                    address: faker.address.cityName(),
                    company: faker.company.bs(),
                    gender: faker.name.sex(),
                    weight: faker.datatype.number({
                        max: 200,
                        min: 80,
                    }),
                };
            });
            resolve(data);
        }, 150);
    });
}
`},98197:function(a,e){e.Z=`import React, { useEffect, useState } from 'react';
import { FormList } from '@dtjoy/dt-design';
import { Button, Form, Input, message, Select, Space } from 'antd';

import getMockData from './data';

export default () => {
    const [form] = Form.useForm();

    const [loading, setLoading] = useState(false);

    const getData = () => {
        setLoading(true);
        getMockData()
            .then((values) => {
                form.setFieldValue('data', values);
            })
            .finally(() => {
                setLoading(false);
            });
    };

    useEffect(() => {
        getData();
    }, []);

    return (
        <Form form={form} layout="vertical" style={{ height: 400 }}>
            <FormList
                name="data"
                loading={loading}
                scroll={{
                    y: 280,
                }}
                columns={[
                    {
                        key: 'name',
                        title: 'Name',
                        dataIndex: 'name',
                        rules: [
                            {
                                required: true,
                                message: 'Please Input Name!',
                            },
                        ],
                        render: () => <Input placeholder="Name" />,
                    },
                    {
                        key: 'gender',
                        title: 'gender',
                        dataIndex: 'gender',
                        required: true,
                        render: () => (
                            <Select
                                options={[
                                    { label: 'female', value: 'female' },
                                    {
                                        label: 'male',
                                        value: 'male',
                                    },
                                ]}
                            />
                        ),
                    },
                    {
                        key: 'weight',
                        title: 'weight',
                        dataIndex: 'weight',
                        dependencies: ([name]) => [['data', name, 'gender']],
                        render: ({ name }, _, form) => {
                            return form?.getFieldValue?.(['data', name, 'gender']) === 'female' ? (
                                '--'
                            ) : (
                                <span>{form?.getFieldValue?.(['data', name, 'weight'])}</span>
                            );
                        },
                    },
                    {
                        key: 'address',
                        title: 'Address',
                        dataIndex: 'address',
                        render: () => <Input placeholder="Address" />,
                    },
                    {
                        key: 'company',
                        title: 'Company',
                        dataIndex: 'company',
                        render: () => <Input placeholder="Company" />,
                    },
                    {
                        key: 'op',
                        title: 'Configuration',
                        render: ({ name }) => (
                            <Button
                                type="link"
                                onClick={() =>
                                    message.info(JSON.stringify(form.getFieldValue(['data', name])))
                                }
                            >
                                Configuration
                            </Button>
                        ),
                    },
                ]}
            />
        </Form>
    );
};
`},20986:function(a,e){e.Z=`import React, { useEffect, useState } from 'react';
import { FormList } from '@dtjoy/dt-design';
import { Button, Form, Input, message } from 'antd';

import getMockData from './data';

export default () => {
    const [form] = Form.useForm();

    const [loading, setLoading] = useState(false);

    const getData = () => {
        setLoading(true);
        getMockData()
            .then((values) => {
                form.setFieldValue('data', values);
            })
            .finally(() => {
                setLoading(false);
            });
    };

    useEffect(() => {
        getData();
    }, []);

    return (
        <Form form={form} layout="vertical" style={{ height: 400 }}>
            <FormList
                name="data"
                loading={loading}
                scroll={{
                    y: 280,
                }}
                columns={[
                    {
                        key: 'name',
                        title: 'Name',
                        dataIndex: 'name',
                        required: true,
                        rules: [
                            {
                                required: true,
                                message: 'Please Input Name!',
                            },
                        ],
                        render: () => <Input placeholder="Name" />,
                    },
                    {
                        key: 'gender',
                        title: 'gender',
                        dataIndex: 'gender',
                        render: (_, namePath, formInstance) => (
                            <span>{formInstance?.getFieldValue(['data', ...namePath] || '-')}</span>
                        ),
                    },
                    {
                        key: 'address',
                        title: 'Address',
                        dataIndex: 'address',
                        required: true,
                        rules: [
                            ({ getFieldValue }, [name]) => ({
                                required: getFieldValue(['data', name, 'gender']) === 'male',
                                message: 'address is Required for male',
                            }),
                        ],
                        render: () => <Input placeholder="Address" />,
                    },
                    {
                        key: 'company',
                        title: 'Company',
                        dataIndex: 'company',
                        render: () => <Input placeholder="Company" />,
                    },
                    {
                        key: 'op',
                        title: 'Configuration',
                        render: ({ name }) => (
                            <Button
                                type="link"
                                onClick={() =>
                                    message.info(JSON.stringify(form.getFieldValue(['data', name])))
                                }
                            >
                                Configuration
                            </Button>
                        ),
                    },
                ]}
            />
        </Form>
    );
};
`}}]);
