"use strict";(self.webpackChunkdt_design=self.webpackChunkdt_design||[]).push([[2784],{5170:function(Re,ue,n){n.d(ue,{NL:function(){return R},rJ:function(){return ee},ri:function(){return ne},v0:function(){return e}});var f=n(17069),Z=n.n(f),m=n(25298),X=n.n(m),ce=n(82092),E=n.n(ce),g=n(53594),ee=function(v){return v[v.PENDING=0]="PENDING",v[v.GENERATING=1]="GENERATING",v[v.DONE=2]="DONE",v[v.STOPPED=3]="STOPPED",v}({}),ne=Z()(function v(_){X()(this,v),E()(this,"id",void 0),E()(this,"assistantId",void 0),E()(this,"createdAt",void 0),E()(this,"title",void 0),E()(this,"prompts",void 0),E()(this,g.sc,!0),this.id=_.id,this.assistantId=_.assistantId,this.createdAt=_.createdAt||new Date().valueOf(),this.title=_.title,this.prompts=_.prompts||[]}),R=Z()(function v(_){X()(this,v),E()(this,"id",void 0),E()(this,"assistantId",void 0),E()(this,"createdAt",void 0),E()(this,"title",void 0),E()(this,"messages",void 0),E()(this,g.sc,!0),this.id=_.id,this.assistantId=_.assistantId,this.createdAt=_.createdAt||new Date().valueOf(),this.title=_.title,this.messages=_.messages||[]}),e=Z()(function v(_){var z,U;X()(this,v),E()(this,"id",void 0),E()(this,"assistantId",void 0),E()(this,"creator",void 0),E()(this,"createdAt",void 0),E()(this,"content",void 0),E()(this,"status",void 0),E()(this,g.sc,!0),this.id=_.id,this.creator=_.creator,this.assistantId=_.assistantId,this.createdAt=_.createdAt||new Date().valueOf(),this.content=(z=_.content)!==null&&z!==void 0?z:"",this.status=(U=_.status)!==null&&U!==void 0?U:ee.PENDING})},82784:function(Re,ue,n){n.d(ue,{Z:function(){return hn}});var f=n(75271),Z=n(26068),m=n.n(Z),X=n(93732),ce=n(68405),E=n(67825),g=n.n(E),ee=n(60027),ne=n(82187),R=n.n(ne),e=n(52676),v=["type","className","children"],_="dtc__aigc__button__global-gradient",z="secondary_linear_gradient",U="secondary_linear_gradient_hover";function te(t){var r=t.type,l=r===void 0?"default":r,d=t.className,a=t.children,p=g()(t,v);return(0,f.useEffect)(function(){if(!document.querySelector(".".concat(_))){var x=document.createElement("div");x.style.setProperty("width","0"),x.style.setProperty("height","0"),x.className=_,x.innerHTML=(0,ee.renderToString)((0,e.jsx)("svg",{width:0,height:0,children:(0,e.jsxs)("defs",{children:[(0,e.jsxs)("linearGradient",{id:z,x1:"1.18164",y1:"3.93164",x2:"13.9881",y2:"8.54198",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#00BAC6"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#0067FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#450FDE"})]}),(0,e.jsxs)("linearGradient",{id:U,x1:"8.96582",y1:"0.96582",x2:"15.9711",y2:"3.4877",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#00BAC6"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#0067FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#450FDE"})]})]})})),document.body.appendChild(x)}},[]),(0,e.jsx)(ce.default,m()(m()({className:R()("dtc__aigc__button",d,"dtc__aigc__button--".concat(l)),ghost:!0},p),{},{children:(0,e.jsx)("span",{className:"dtc__aigc__button__text",children:a})}))}var ge=n(51709),F=n(35475),oe=n(33321),$=["lineNumberStyle"];function h(t){var r=t.className,l=t.style,d=t.toolbars,a=t.copy,p=t.convert,x=t.children,b=t.options,W=b===void 0?{}:b,B=W.lineNumberStyle,L=B===void 0?{}:B,k=g()(W,$),V=(0,f.useMemo)(function(){var pe=x[0],_e=/language-(\w+)/.exec(pe.props.className||""),je=_e?_e[1]:"SQL",ye=String(pe.props.children).replace(/\n$/,"");return{value:ye,language:je}},[x]),C=V.value,w=V.language,Q=(0,f.useMemo)(function(){return typeof a=="boolean"?{disabled:!a,options:{}}:{disabled:!1,options:m()({},a||{})}},[a]),me=C||"";return(0,e.jsxs)("div",{className:R()("dtc__aigc__codeblock",p&&"dtc__aigc__codeblock--convert",r),style:l,children:[(0,e.jsxs)("div",{className:"dtc__aigc__codeblock__header",children:[(0,e.jsx)("span",{className:"dtc__aigc__codeblock__language",children:w.toLocaleLowerCase()}),(0,e.jsxs)("div",{className:"dtc__aigc__codeblock__tool",children:[!Q.disabled&&(0,e.jsx)(oe.Z,m()({text:me},Q.options)),typeof d=="function"?d():d]})]}),(0,e.jsx)(ge.Z,m()(m()({language:w.toLocaleLowerCase(),wrapLines:!0,style:m()(m()({},F.Yn),{},{'code[class*="language-"]':m()(m()({},F.Yn['code[class*="language-"]']),{},{background:p?"#F9F9FA":"#fff"}),'pre[class*="language-"]':m()(m()({},F.Yn['pre[class*="language-"]']),{},{background:p?"#F9F9FA":"#fff",margin:0,overflow:"auto",maxHeight:270,borderRadius:"0 0 4px 4px"})}),lineNumberStyle:m()({fontStyle:"normal"},L),showLineNumbers:!0},k),{},{children:me}))]})}var T=n(48305),N=n.n(T),c=n(5170),P=n(17280),A=n(99339),O=n(73507),S=n(77569),D=n(18704),de=n(16120);function j(t){return t.loading?(0,e.jsxs)("div",{className:"dtc__aigc__loading",children:[(0,e.jsx)("div",{}),(0,e.jsx)("div",{}),(0,e.jsx)("div",{})]}):(0,e.jsx)(e.Fragment,{children:t.children})}var H=n(15558),Y=n.n(H),ie=n(15359),he=n(99216),Oe=n(45994),Ae=["typing","className","rehypePlugins","remarkPlugins","codeBlock","components","children","onMount"],Me=["src"],Te=(0,f.memo)(function(r){var l=r.typing,d=r.className,a=r.rehypePlugins,p=a===void 0?[]:a,x=r.remarkPlugins,b=x===void 0?[]:x,W=r.codeBlock,B=r.components,L=r.children,k=r.onMount,V=g()(r,Ae);return(0,f.useEffect)(function(){k==null||k()},[]),(0,e.jsx)(ie.D,m()(m()({className:R()("dtc__aigc__markdown",l&&"dtc__aigc__markdown--blink",d),rehypePlugins:p,remarkPlugins:[he.Z].concat(Y()(b)),components:m()({code:function(w){var Q=w.children;return(0,e.jsx)("code",{className:"dtc__aigc__markdown__inlineCode",children:Q})},pre:function(w){var Q=w.children;return(0,e.jsx)(h,m()(m()({},W),{},{children:Q}))},hr:function(){return(0,e.jsx)("hr",{color:"#ebecf0",className:"dtc__aigc__markdown__hr"})},p:function(w){return w.node.children.every(function(Q){return Q.type==="text"})?(0,e.jsx)("p",{children:w.children}):(0,e.jsx)("div",{children:w.children})},img:function(w){var Q=w.src,me=g()(w,Me);return(0,e.jsx)(Oe.Z,m()({className:"dtc__aigc__markdown__img",src:Q},me))}},B),includeElementIndex:!0},V),{},{children:L}))},function(t,r){return!(t.typing!==r.typing||t.className!==r.className||t.children!==r.children||t.codeBlock!==r.codeBlock)});function xe(t){var r=t.current,l=t.total,d=t.onChange,a=t.style,p=t.disabled,x=r===1||p,b=r===l||p;return(0,e.jsxs)("div",{className:"dt-aigc-pagination",style:a,children:[(0,e.jsx)(D.LeftOutlined,{className:x?"arrow-disabled":"",onClick:function(){x||d(r-1)},"data-testid":"icon-left"}),(0,e.jsxs)("section",{children:[(0,e.jsx)("span",{children:r}),(0,e.jsx)("span",{children:"/"}),(0,e.jsx)("span",{children:l})]}),(0,e.jsx)(D.RightOutlined,{className:b?"arrow-disabled":"",onClick:function(){b||d(r+1)},"data-testid":"icon-right"})]})}var De=f.createContext({chat:void 0,maxRegenerateCount:5});function Ce(){return f.useContext(De)}var we=["formatText"];function Fe(t){var r=t.prompt,l=t.data,d=t.regenerate,a=t.copy,p=t.onRegenerate,x=t.onStop,b=t.onLazyRendered,W=(0,de.Z)(fe),B=Ce(),L=B.components,k=L===void 0?{}:L,V=B.messageIcons,C=B.codeBlock,w=B.rehypePlugins,Q=B.remarkPlugins,me=(0,f.useState)(!1),pe=N()(me,2),_e=pe[0],je=pe[1],ye=(0,f.useRef)(function(){});function fe(ae){var ve=N()(ae,1),Ee=ve[0];Ee.isIntersecting&&je(function(Ne){if(!Ne){var be=function(){return new Promise(function(pn){ye.current=pn})};b==null||b(be)}return!0})}var q=(0,f.useState)(l.length),J=N()(q,2),re=J[0],G=J[1],I=l[re-1],i=(0,f.useMemo)(function(){return I?[I.status===c.rJ.GENERATING,I.status===c.rJ.PENDING,I.status===c.rJ.STOPPED]:[!1,!1,!1]},[I]),s=N()(i,3),o=s[0],u=s[1],y=s[2];(0,f.useEffect)(function(){G(l.length)},[l.length]);var M=(0,f.useMemo)(function(){return Object.keys(k).reduce(function(ae,ve){var Ee=k[ve];return ae[ve]=function(){for(var Ne=arguments.length,be=new Array(Ne),Pe=0;Pe<Ne;Pe++)be[Pe]=arguments[Pe];return typeof Ee=="function"?Ee.apply(void 0,be.concat([{messageId:I==null?void 0:I.id,promptId:r.id}])):Ee},ae},{})},[k,I==null?void 0:I.id]),se=(0,f.useMemo)(function(){return typeof a=="boolean"?{disabled:!a,options:{}}:{disabled:!1,options:m()({},a||{})}},[a]),K=function(){var ve;if(se.disabled)return null;var Ee=se.options,Ne=Ee.formatText,be=g()(Ee,we),Pe=(ve=Ne==null?void 0:Ne(I==null?void 0:I.content))!==null&&ve!==void 0?ve:I==null?void 0:I.content;return Pe?(0,e.jsx)(oe.Z,m()({className:"dtc__message__icon",button:(0,e.jsx)(D.CopyOutlined,{}),text:Pe},be)):null};return(0,e.jsxs)("section",{className:"dtc__message__container",children:[(0,e.jsx)("div",{className:"dtc__message__avatar",children:(0,e.jsx)(D.AiAvatarColored,{})}),(0,e.jsxs)("div",{className:"dtc__message__wrapper",children:[(0,e.jsxs)("div",{className:R()("dtc__message__content",u&&"dtc__message__content--loading"),ref:W,children:[(0,e.jsx)(j,{loading:u,children:_e&&(0,e.jsx)(Te,{typing:o,components:M,codeBlock:C,rehypePlugins:w,remarkPlugins:Q,onMount:function(){ye.current()},children:I==null?void 0:I.content})}),(0,e.jsxs)("div",{className:"dtc__message__footer",children:[l.length>1&&!o&&!u&&(0,e.jsx)(xe,{current:re,total:l.length,onChange:function(ve){return G(ve)}}),y&&(0,e.jsx)("span",{className:"dtc__message__stopText",children:"\u56DE\u7B54\u5DF2\u505C\u6B62"})]})]}),(o||u)&&(0,e.jsx)("div",{className:"dtc__message__extra",children:(0,e.jsx)(ce.default,{type:"link",className:"dtc__message__stopBtn",onClick:function(){return x==null?void 0:x(I)},icon:(0,e.jsx)(D.PauseOutlined,{style:{verticalAlign:"sub"}}),children:"\u505C\u6B62\u56DE\u7B54"})})]}),!o&&!u&&(0,e.jsxs)(A.default,{className:"dtc__message__iconGroup",align:"center",children:[K(),typeof V=="function"?V(I,r):V,d&&(0,e.jsx)(S.default,{title:"\u91CD\u65B0\u751F\u6210",getTooltipContainer:function(ve){return ve.parentNode},children:(0,e.jsx)("span",{className:"dtc__message__icon",onClick:function(){return p==null?void 0:p(I)},children:(0,e.jsx)(D.ReloadOutlined,{})})})]})]})}function $e(t){var r=t.data,l=t.className,d=Ce(),a=d.components,p=a===void 0?{}:a,x=d.codeBlock,b=(0,f.useMemo)(function(){return Object.keys(p).reduce(function(W,B){var L=p[B];return W[B]=function(){for(var k=arguments.length,V=new Array(k),C=0;C<k;C++)V[C]=arguments[C];return typeof L=="function"?L.apply(void 0,V.concat([{promptId:r==null?void 0:r.id}])):L},W},{})},[p,r==null?void 0:r.id]);return r!=null&&r.title?(0,e.jsx)("section",{className:R()("dtc__prompt__container",l),children:(0,e.jsx)("div",{className:"dtc__prompt__wrapper",children:(0,e.jsx)("div",{className:"dtc__prompt__content",children:(0,e.jsx)(Te,{codeBlock:x,components:b,children:(r==null?void 0:r.title)||""})})})}):null}var Ge=(0,f.forwardRef)(function(t,r){var l,d=t.data,a=t.placeholder,p=t.scrollable,x=p===void 0?!0:p,b=t.onRegenerate,W=t.onStop,B=Ce(),L=B.maxRegenerateCount,k=B.copy,V=B.regenerate,C=(0,f.useRef)(null),w=(0,f.useState)(!0),Q=N()(w,2),me=Q[0],pe=Q[1],_e=(0,f.useRef)(0);(0,f.useImperativeHandle)(r,function(){return{nativeElement:C.current,scrollToBottom:function(){_e.current=window.requestAnimationFrame(function(){var re,G;(re=C.current)===null||re===void 0||re.scrollTo({top:(G=C.current)===null||G===void 0?void 0:G.scrollHeight,left:0,behavior:"instant"})})}}});var je=function(){if(!C.current)return!1;var re=5,G=C.current,I=G.scrollTop,i=G.clientHeight,s=G.scrollHeight;return I+i>=s-re},ye=!!(Array.isArray(d)&&d.length),fe=d[d.length-1],q=ye?(l=fe.messages)===null||l===void 0?void 0:l[fe.messages.length-1]:void 0;return(0,f.useLayoutEffect)(function(){var J,re=function(){C.current&&pe(je())};return(J=C.current)===null||J===void 0||J.addEventListener("scroll",re),function(){var G;(G=C.current)===null||G===void 0||G.removeEventListener("scroll",re),window.cancelAnimationFrame(_e.current)}},[]),(0,f.useLayoutEffect)(function(){_e.current=window.requestAnimationFrame(function(){C.current&&(ye?C.current.scrollTop=C.current.scrollHeight:C.current.scrollTop=0)})},[q==null?void 0:q.id]),(0,f.useLayoutEffect)(function(){_e.current=window.requestAnimationFrame(function(){C.current&&(q==null?void 0:q.status)===c.rJ.GENERATING&&me&&(C.current.scrollTop=C.current.scrollHeight)})},[q==null?void 0:q.status,q==null?void 0:q.content,me]),(0,e.jsx)("div",{className:R()("dtc__aigc__content__container",!x&&"dtc__aigc__content__container--disabled"),ref:C,children:ye?(0,e.jsx)("div",{className:"dtc__aigc__content__inner__holder",children:d.map(function(J,re){var G=re===d.length-1&&J.messages.length<L;return(0,e.jsxs)(f.Fragment,{children:[(0,e.jsx)($e,{data:J}),(0,e.jsx)(Fe,{prompt:J,data:J.messages,regenerate:typeof V=="function"?V(J,re,d):V!=null?V:G,copy:k,onRegenerate:function(i){return b==null?void 0:b(i,J)},onStop:function(i){return W==null?void 0:W(i,J)},onLazyRendered:function(i){var s=je();i().then(function(){window.requestAnimationFrame(function(){pe(s),s&&C.current&&(C.current.scrollTop=C.current.scrollHeight)})})}})]},J.id)})}):(0,e.jsx)(f.Fragment,{children:a})})}),Ke=Ge,yn=n(22030),Ze=n(23479),ze=["className"],Je=["className"];function Ve(t){var r=t.className,l=g()(t,ze);return(0,e.jsx)("span",m()(m()({className:R()("dtc__icon",r)},l),{},{children:(0,e.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",children:[(0,e.jsx)("path",{fill:"url(#paint0_linear_3878_6538)",fillRule:"evenodd",d:"M17.999 3.858 3.35 9.204a1.66 1.66 0 0 0-1.095 1.458 1.66 1.66 0 0 0 .862 1.602l4.454 2.44c.27.143.593.098.808-.118l.737-.72 4.508-4.428a.677.677 0 0 1 .952.018c.26.261.26.693-.009.954l-4.562 4.473-.61.603a.68.68 0 0 0-.118.828l2.64 4.626c.315.513.845.81 1.429.81.063 0 .117 0 .18-.009a1.68 1.68 0 0 0 1.41-1.107L20.153 6a1.69 1.69 0 0 0-.404-1.764 1.64 1.64 0 0 0-1.751-.378",clipRule:"evenodd"}),(0,e.jsx)("defs",{children:(0,e.jsxs)("linearGradient",{id:"paint0_linear_3878_6538",x1:"2.25",x2:"23.921",y1:"3.75",y2:"11.552",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#00BAC6"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#0067FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#450FDE"})]})}),(0,e.jsx)("defs",{children:(0,e.jsxs)("linearGradient",{id:"paint0_linear_3878_6538_hover",x1:"2.25",x2:"23.921",y1:"3.75",y2:"11.552",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#08C4FF"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#4892FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#8A61FF"})]})})]})}))}var He=function(r){var l=r.className,d=g()(r,Je);return(0,e.jsx)("span",m()(m()({className:R()("dtc__icon",l)},d),{},{children:(0,e.jsxs)("svg",{width:"1em",height:"1em",viewBox:"0 0 6 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,e.jsx)("path",{d:"M0 3C0 1.34315 1.34315 0 3 0C4.65685 0 6 1.34315 6 3C6 4.65685 4.65685 6 3 6C1.34315 6 0 4.65685 0 3Z",fill:"url(#paint0_linear_5253_12831)"}),(0,e.jsx)("circle",{cx:"3",cy:"3",r:"3",fill:"url(#paint1_linear_5253_12831)"}),(0,e.jsxs)("defs",{children:[(0,e.jsxs)("linearGradient",{id:"paint0_linear_5253_12831",x1:"0",y1:"0",x2:"7.2238",y2:"2.60057",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#08C4FF"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#4892FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#8A61FF"})]}),(0,e.jsxs)("linearGradient",{id:"paint1_linear_5253_12831",x1:"0",y1:"0",x2:"7.2238",y2:"2.60057",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#08C4FF"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#4892FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#8A61FF"})]})]})]})}))},Ye=["onChange","onPressEnter","onPressShiftEnter","onSubmit","button","className"];function ke(t){var r=t.onChange,l=t.onPressEnter,d=t.onPressShiftEnter,a=t.onSubmit,p=t.button,x=t.className,b=g()(t,Ye),W=function(L){r==null||r(L.target.value)};return(0,e.jsxs)("div",{className:"dtc__chat__textarea__container",children:[(0,e.jsx)(Ze.default.TextArea,m()(m()({className:R()("dtc__chat__textarea",x)},b),{},{onChange:W,onPressEnter:function(L){L.persist(),L.preventDefault(),L.shiftKey?(r==null||r(b.value+`
`),d==null||d(L)):l==null||l(L)},autoSize:{minRows:2,maxRows:7}})),p!=null&&p.disabled?(0,e.jsx)(D.SendFilled,{disabled:!0,className:"dtc__chat__textarea__send"}):(0,e.jsx)(Ve,{className:R()("dtc__chat__textarea__send"),onClick:function(){return a==null?void 0:a(b.value)}})]})}var Xe=["className","children"],Qe=function(r){var l=r.className,d=r.children,a=g()(r,Xe);return(0,e.jsxs)("div",m()(m()({className:R()("dtc__tag",l)},a),{},{children:[(0,e.jsx)(He,{className:"dtc__tag__icon"}),d]}))},qe=Qe,en=n(90228),We=n.n(en),nn=n(87999),tn=n.n(nn),rn=n(17069),Se=n.n(rn),sn=n(25298),Be=n.n(sn),an=n(21742),Le=n.n(an),on=n(83136),Ue=n.n(on),Ie=n(53594),ln=n(44367),un=function(t){Le()(l,t);var r=Ue()(l);function l(){return Be()(this,l),r.apply(this,arguments)}return Se()(l)}(c.ri),cn=function(t){Le()(l,t);var r=Ue()(l);function l(){return Be()(this,l),r.apply(this,arguments)}return Se()(l)}(c.NL),dn=function(t){Le()(l,t);var r=Ue()(l);function l(){return Be()(this,l),r.apply(this,arguments)}return Se()(l)}(c.v0),vn=function(r){return(r+1)%1e6};function mn(t){var r=(0,f.useReducer)(vn,0),l=N()(r,2),d=l[1],a=(0,f.useRef)(void 0),p=(0,ln.Z)({onTyping:function(s){fe(x.current.promptId,x.current.messageId,{content:s})}}),x=(0,f.useRef)({promptId:"",messageId:""}),b=(0,f.useRef)(!1);function W(i,s){p.start(),fe(i,s,{status:c.rJ.PENDING}),x.current={promptId:i,messageId:s}}function B(i,s,o){if(i===x.current.promptId&&s===x.current.messageId){var u;p.push(o),((u=q(i,s))===null||u===void 0?void 0:u.status)!==c.rJ.GENERATING&&fe(i,s,{status:c.rJ.GENERATING})}}function L(i,s){b.current=!0,p.close().then(function(){b.current=!1,fe(i,s,{status:c.rJ.DONE})})}function k(i){var s,o=(t==null||(s=t.ctor)===null||s===void 0?void 0:s.Conversation)||un;a.current=new o(i),d()}function V(){a.current=void 0,d()}function C(i){a.current&&(a.current=(0,Ie.Uy)(a.current,function(s){Object.assign(s,i)}),d())}function w(){return a.current}function Q(){for(var i,s=arguments.length,o=new Array(s),u=0;u<s;u++)o[u]=arguments[u];if(a.current){var y=(t==null||(i=t.ctor)===null||i===void 0?void 0:i.Prompt)||cn;a.current=(0,Ie.Uy)(a.current,function(M){var se;(se=M.prompts)===null||se===void 0||se.push(new y(o[0]))}),d()}}function me(i){a.current&&(a.current=(0,Ie.Uy)(a.current,function(s){var o,u,y=(o=s.prompts)===null||o===void 0?void 0:o.findIndex(function(M){return M.id===i});y!==-1&&((u=s.prompts)===null||u===void 0||u.splice(y,1))}),d())}function pe(i,s){a.current&&(a.current=(0,Ie.Uy)(a.current,function(o){var u=o.prompts.find(function(y){return y.id===i});u&&(typeof s=="function"?Object.assign(u,s(u)):Object.assign(u,s))}),d())}function _e(i){var s;return(s=a.current)===null||s===void 0||(s=s.prompts)===null||s===void 0?void 0:s.find(function(o){return typeof i=="function"?i(o):o.id===i})}function je(i){for(var s,o=arguments.length,u=new Array(o>1?o-1:0),y=1;y<o;y++)u[y-1]=arguments[y];if(a.current){var M=(t==null||(s=t.ctor)===null||s===void 0?void 0:s.Message)||dn;a.current=(0,Ie.Uy)(a.current,function(se){var K=se.prompts.find(function(ae){return ae.id===i});K&&K.messages.push(new M(u[0]))}),d()}}function ye(i,s){a.current&&(a.current=(0,Ie.Uy)(a.current,function(o){var u,y,M=o.prompts.find(function(K){return K.id===i});if(M){var se=(u=M.messages)===null||u===void 0?void 0:u.findIndex(function(K){return K.id===s});se!==-1&&((y=M.messages)===null||y===void 0||y.splice(se,1))}}),d())}function fe(i,s,o,u){a.current&&(a.current=(0,Ie.Uy)(a.current,function(y){var M,se=y.prompts.find(function(ae){return ae.id===i}),K=se==null||(M=se.messages)===null||M===void 0?void 0:M.find(function(ae){return ae.id===s});K&&(typeof o=="function"?Object.assign(K,o(K)):Object.assign(K,o))}),u!==!1&&d())}function q(i,s){var o;return(o=a.current)===null||o===void 0||(o=o.prompts)===null||o===void 0||(o=o.find(function(u){return u.id===i}))===null||o===void 0||(o=o.messages)===null||o===void 0?void 0:o.find(function(u){return u.id===s})}function J(){var i,s,o,u=(i=a.current)===null||i===void 0||(i=i.prompts)===null||i===void 0?void 0:i[((s=a.current)===null||s===void 0?void 0:s.prompts.length)-1],y=u==null||(o=u.messages)===null||o===void 0?void 0:o[u.messages.length-1];return y?y.status===c.rJ.PENDING||y.status===c.rJ.GENERATING:!1}function re(){return G.apply(this,arguments)}function G(){return G=tn()(We()().mark(function i(){var s,o,u,y,M;return We()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(y=(s=a.current)===null||s===void 0||(s=s.prompts)===null||s===void 0?void 0:s[((o=a.current)===null||o===void 0?void 0:o.prompts.length)-1],M=y==null||(u=y.messages)===null||u===void 0?void 0:u[y.messages.length-1],(M==null?void 0:M.status)!==c.rJ.GENERATING){K.next=8;break}return K.next=5,p.close(!0);case 5:b.current&&fe(y.id,M.id,{status:c.rJ.DONE}),K.next=9;break;case 8:p.stop();case 9:return K.abrupt("return",w());case 10:case"end":return K.stop()}},i)})),G.apply(this,arguments)}function I(i){if(a.current=i,b.current=!1,J()){var s,o,u=w(),y=u==null||(s=u.prompts)===null||s===void 0?void 0:s[(u==null?void 0:u.prompts.length)-1],M=y==null||(o=y.messages)===null||o===void 0?void 0:o[y.messages.length-1];if(!y||!M)return a.current;p.start(M.content),x.current={promptId:y.id,messageId:M.id}}return d(),a.current}return{conversation:{create:k,remove:V,update:C,get:w},prompt:{create:Q,remove:me,update:pe,get:_e},message:{create:je,remove:ye,update:fe,get:q},loading:J,start:W,push:B,close:L,stop:p.stop,isTyping:p.isTyping,saveViewState:re,restoreViewState:I}}var _n=n(39347);function fn(t){var r=t.icon,l=r===void 0?(0,e.jsx)(D.AiAvatarColored,{style:{fontSize:24}}):r,d=t.title,a=t.description,p=t.className,x=t.style;return(0,e.jsx)("div",{className:R()("dtc__welcome",p),style:x,children:(0,e.jsxs)("div",{className:"dtc__welcome__content",children:[(0,e.jsxs)(_n.Z,{gap:8,align:"center",children:[l,(0,e.jsx)("span",{className:"dtc__welcome__title",children:d})]}),(0,e.jsx)("div",{className:"dtc__welcome__description",children:a})]})})}var gn=5;function le(t){var r=t.chat,l=t.components,d=t.maxRegenerateCount,a=d===void 0?gn:d,p=t.regenerate,x=t.copy,b=t.codeBlock,W=t.messageIcons,B=t.rehypePlugins,L=t.remarkPlugins,k=t.children;return(0,e.jsx)(De.Provider,{value:{chat:r,components:l,maxRegenerateCount:a,copy:x,codeBlock:b,messageIcons:W,regenerate:p,rehypePlugins:B,remarkPlugins:L},children:k})}le.useChat=mn,le.useContext=Ce,le.Loading=j,le.Button=te,le.CodeBlock=h,le.Input=ke,le.Markdown=Te,le.Pagination=xe,le.Message=Fe,le.Prompt=$e,le.Content=Ke,le.Tag=qe,le.Welcome=fn;var hn=le},33321:function(Re,ue,n){n.d(ue,{Z:function(){return te}});var f=n(26068),Z=n.n(f),m=n(73507),X=n(77569),ce=n(30393),E=n(71680),g=n(75271),ee=n(29520),ne=n(18704),R=n(82187),e=n.n(R),v=n(51059),_=n(82545),z=n(52676),U=function(F){var oe=(0,_.Z)("Copy"),$=F.button,h=$===void 0?(0,z.jsx)(ne.CopyOutlined,{className:"dt-copy__default-icon"}):$,T=F.text,N=F.tooltip,c=N===void 0?oe.copy:N,P=F.style,A=F.className,O=F.disabled,S=O===void 0?!1:O,D=F.onCopy,de=D===void 0?function(){return E.default.success(oe.copied)}:D,j=function(){S||new ee.X0().copy(T,function(){return de(T)})},H=function(){return(0,z.jsx)("span",{className:e()(["dt-copy",{"dt-copy--disabled":S},A]),style:P,onClick:function(){return j()},children:h})},Y=(0,v.Z)(c);return(0,z.jsx)(X.default,Z()(Z()({},Y),{},{children:H()}))},te=U},39347:function(Re,ue,n){n.d(ue,{Z:function(){return N}});var f=n(26068),Z=n.n(f),m=n(82092),X=n.n(m),ce=n(67825),E=n.n(ce),g=n(75271),ee=n(47004),ne=n(82187),R=n.n(ne),e=n(22717),v=["wrap","nowrap","wrap-reverse"],_=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],z=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],U=function(P,A){var O=A.wrap===!0?"wrap":A.wrap;return X()({},"".concat(P,"-wrap-").concat(O),O&&v.includes(O))},te=function(P,A){var O={};return z.forEach(function(S){O["".concat(P,"-align-").concat(S)]=A.align===S}),O["".concat(P,"-align-stretch")]=!A.align&&!!A.vertical,O},ge=function(P,A){var O={};return _.forEach(function(S){O["".concat(P,"-justify-").concat(S)]=A.justify===S}),O};function F(c,P){return R()(Z()(Z()(Z()({},U(c,P)),te(c,P)),ge(c,P)))}var oe=F,$=n(52676),h=["prefixCls","rootClassName","className","style","flex","gap","vertical","component"],T=g.forwardRef(function(c,P){var A=c.prefixCls,O=c.rootClassName,S=c.className,D=c.style,de=c.flex,j=c.gap,H=c.vertical,Y=H===void 0?!1:H,ie=c.component,he=ie===void 0?"div":ie,Oe=E()(c,h),Ae=g.useContext(ee.E_),Me=Ae.getPrefixCls,Te=Ae.direction,xe=Me("flex",A),De=R()(xe,S,O,oe(xe,c),X()(X()(X()({},"".concat(xe,"-rtl"),Te==="rtl"),"".concat(xe,"-gap-").concat(j),j&&typeof j=="string"),"".concat(xe,"-vertical"),Y)),Ce=Z()({},D);return de&&(Ce.flex=de),j&&typeof j!="string"&&(Ce.gap=j),(0,$.jsx)(he,Z()({ref:P,className:De,style:Ce},(0,e.default)(Oe,["justify","wrap","align"])))}),N=T},45994:function(Re,ue,n){var f=n(87625),Z=n.n(f),m=n(65502),X=n(67825),ce=n.n(X),E=n(26068),g=n.n(E),ee=n(48305),ne=n.n(ee),R=n(75271),e=n(16120),v=n(52676),_=["src","className","style"],z=["src","className","style","loader"];function U($){return new Promise(function(h,T){var N=new Image;N.onload=function(){return h(!0)},N.onerror=T,N.src=$})}function te($){var h=$.src,T=R.useState(!0),N=ne()(T,2),c=N[0],P=N[1],A=R.useState(void 0),O=ne()(A,2),S=O[0],D=O[1];return R.useEffect(function(){U(h).then(function(){P(!1),D(h)}).finally(function(){P(!1)})},[h]),{isLoading:c,src:S}}var ge=function(h){var T=h.lazy;return T?(0,v.jsx)(F,g()({},h)):(0,v.jsx)(oe,g()({},h))},F=function(h){var T=h.src,N=h.className,c=h.style,P=ce()(h,_),A=(0,e.Z)(function(O){var S=ne()(O,1),D=S[0],de=D.target,j=D.isIntersecting;if(j){var H,Y=de;Y.src=(H=Y.dataset.src)!==null&&H!==void 0?H:"",Y.onload=function(){Y.style.opacity="1"}}});return(0,v.jsx)("img",g()(g()({className:N,style:c,ref:A},P),{},{"data-src":T}))},oe=function(h){var T=h.src,N=h.className,c=h.style,P=h.loader,A=P===void 0?(0,v.jsx)(m.default,{spinning:!0}):P,O=ce()(h,z),S=te({src:T}),D=S.src,de=S.isLoading;return D?(0,v.jsx)("img",g()(g()({},O),{},{className:N,style:c,src:D})):de?A:null};ue.Z=ge},16120:function(Re,ue,n){var f=n(48305),Z=n.n(f),m=n(75271),X=function(E){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ee=(0,m.useRef)(null),ne=g.threshold,R=ne===void 0?0:ne,e=g.root,v=e===void 0?null:e,_=g.rootMargin,z=_===void 0?"0%":_,U=g.freezeOnceVisible,te=U===void 0?!1:U,ge=(0,m.useState)(),F=Z()(ge,2),oe=F[0],$=F[1],h=(oe==null?void 0:oe.isIntersecting)&&te,T=function(c,P){$(c[0]),E(c,P)};return(0,m.useEffect)(function(){var N=ee.current,c=!!window.IntersectionObserver;if(!(h||!N)){if(!c){var P,A,O={boundingClientRect:(P=N.getBoundingClientRect())!==null&&P!==void 0?P:null,intersectionRatio:1,intersectionRect:(A=N.getBoundingClientRect())!==null&&A!==void 0?A:null,isIntersecting:!0,rootBounds:null,target:N,time:Date.now()};T([O],null)}var S=new IntersectionObserver(T,{threshold:R,root:v,rootMargin:z});return S.observe(N),function(){return S.disconnect()}}},[JSON.stringify(R),v,z,h]),ee};ue.Z=X},44367:function(Re,ue,n){n.d(ue,{Z:function(){return ne}});var f=n(90228),Z=n.n(f),m=n(87999),X=n.n(m),ce=n(48305),E=n.n(ce),g=n(75271),ee=50;function ne(R){var e=R.onTyping,v=(0,g.useRef)(),_=(0,g.useRef)(""),z=(0,g.useRef)(1),U=(0,g.useRef)(0),te=(0,g.useRef)(!1),ge=(0,g.useState)(!1),F=E()(ge,2),oe=F[0],$=F[1],h=(0,g.useRef)(!1),T=(0,g.useRef)(0);function N(){var j=_.current.length-U.current-1,H=1e3/ee;z.current=Math.ceil(j/H)}function c(){var j=_.current.slice(U.current),H=j.slice(0,z.current),Y=/<[a-zA-Z]{0,4}\s[^<]*>/;if(Y.test(j)&&!Y.test(H)){var ie=j.match(Y),he=ie[0],Oe=j.indexOf(he);return U.current+Oe+he.length}return U.current+z.current}function P(){v.current||(v.current=window.setInterval(function(){if(U.current<_.current.length){var j=_.current,H=c(),Y=j.slice(0,H);e(Y),U.current=Y.length}else te.current||(window.clearInterval(v.current),v.current=0,$(!1),h.current=!1)},ee))}(0,g.useEffect)(function(){return function(){window.clearInterval(v.current),window.clearInterval(T.current),v.current=0}},[]);function A(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";te.current=!0,$(!0),window.clearInterval(v.current),v.current=0,_.current=j,U.current=j.length}function O(j){te.current&&(j.startsWith("n")&&_.current.endsWith("\\")?_.current=_.current.slice(0,-1)+`
`+j.slice(1).replace(/\\n/g,`
`):_.current+=j.replace(/\\n/g,`
`),N(),P())}function S(j){return D.apply(this,arguments)}function D(){return D=X()(Z()().mark(function j(H){return Z()().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(!H){ie.next=10;break}window.clearInterval(T.current),window.clearInterval(v.current),v.current=0,e(_.current),$(!1),h.current=!1,te.current=!1,ie.next=14;break;case 10:return te.current=!1,h.current=!0,window.clearInterval(T.current),ie.abrupt("return",new Promise(function(he){v.current?T.current=window.setInterval(function(){h.current||(he(),h.current=!0,window.clearInterval(T.current))},1e3):(he(),h.current=!1,$(!1),window.clearInterval(T.current))}));case 14:case"end":return ie.stop()}},j)})),D.apply(this,arguments)}function de(){te.current=!1,$(!1),h.current=!1,v.current&&(window.clearInterval(v.current),v.current=0),_.current="",U.current=0}return{start:A,push:O,close:S,stop:de,isTyping:oe}}}}]);
