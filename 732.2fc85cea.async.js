"use strict";(self.webpackChunkdt_design=self.webpackChunkdt_design||[]).push([[732],{65225:function(Pe,le,n){n.d(le,{NL:function(){return I},rJ:function(){return X},ri:function(){return Q},v0:function(){return e}});var f=n(17069),Z=n.n(f),v=n(25298),oe=n.n(v),ue=n(82092),E=n.n(ue),g=n(53594),X=function(i){return i[i.PENDING=0]="PENDING",i[i.GENERATING=1]="GENERATING",i[i.DONE=2]="DONE",i[i.STOPPED=3]="STOPPED",i}({}),Q=Z()(function i(m){oe()(this,i),E()(this,"id",void 0),E()(this,"assistantId",void 0),E()(this,"createdAt",void 0),E()(this,"title",void 0),E()(this,"prompts",void 0),E()(this,g.sc,!0),this.id=m.id,this.assistantId=m.assistantId,this.createdAt=m.createdAt||new Date().valueOf(),this.title=m.title,this.prompts=m.prompts||[]}),I=Z()(function i(m){oe()(this,i),E()(this,"id",void 0),E()(this,"assistantId",void 0),E()(this,"createdAt",void 0),E()(this,"title",void 0),E()(this,"messages",void 0),E()(this,g.sc,!0),this.id=m.id,this.assistantId=m.assistantId,this.createdAt=m.createdAt||new Date().valueOf(),this.title=m.title,this.messages=m.messages||[]}),e=Z()(function i(m){var G,T;oe()(this,i),E()(this,"id",void 0),E()(this,"assistantId",void 0),E()(this,"creator",void 0),E()(this,"createdAt",void 0),E()(this,"content",void 0),E()(this,"status",void 0),E()(this,g.sc,!0),this.id=m.id,this.creator=m.creator,this.assistantId=m.assistantId,this.createdAt=m.createdAt||new Date().valueOf(),this.content=(G=m.content)!==null&&G!==void 0?G:"",this.status=(T=m.status)!==null&&T!==void 0?T:X.PENDING})},60732:function(Pe,le,n){n.d(le,{Z:function(){return pn}});var f=n(75271),Z=n(26068),v=n.n(Z),oe=n(91259),ue=n(97294),E=n(67825),g=n.n(E),X=n(60027),Q=n(82187),I=n.n(Q),e=n(52676),i=["type","className","children"],m="dtc__aigc__button__global-gradient",G="secondary_linear_gradient",T="secondary_linear_gradient_hover";function k(t){var r=t.type,u=r===void 0?"default":r,d=t.className,a=t.children,p=g()(t,i);return(0,f.useEffect)(function(){if(!document.querySelector(".".concat(m))){var y=document.createElement("div");y.style.setProperty("width","0"),y.style.setProperty("height","0"),y.className=m,y.innerHTML=(0,X.renderToString)((0,e.jsx)("svg",{width:0,height:0,children:(0,e.jsxs)("defs",{children:[(0,e.jsxs)("linearGradient",{id:G,x1:"1.18164",y1:"3.93164",x2:"13.9881",y2:"8.54198",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#00BAC6"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#0067FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#450FDE"})]}),(0,e.jsxs)("linearGradient",{id:T,x1:"8.96582",y1:"0.96582",x2:"15.9711",y2:"3.4877",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#00BAC6"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#0067FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#450FDE"})]})]})})),document.body.appendChild(y)}},[]),(0,e.jsx)(ue.default,v()(v()({className:I()("dtc__aigc__button",d,"dtc__aigc__button--".concat(u)),ghost:!0},p),{},{children:(0,e.jsx)("span",{className:"dtc__aigc__button__text",children:a})}))}var ve=n(51709),S=n(35475),q=n(5909),B=["lineNumberStyle"];function _(t){var r=t.className,u=t.style,d=t.toolbars,a=t.copy,p=t.convert,y=t.children,P=t.options,U=P===void 0?{}:P,A=U.lineNumberStyle,M=A===void 0?{}:A,J=g()(U,B),w=(0,f.useMemo)(function(){var ge=y[0],fe=/language-(\w+)/.exec(ge.props.className||""),xe=fe?fe[1]:"SQL",pe=String(ge.props.children).replace(/\n$/,"");return{value:pe,language:xe}},[y]),x=w.value,$=w.language,V=(0,f.useMemo)(function(){return typeof a=="boolean"?{disabled:!a,options:{}}:{disabled:!1,options:v()({},a||{})}},[a]),me=x||"";return(0,e.jsxs)("div",{className:I()("dtc__aigc__codeblock",p&&"dtc__aigc__codeblock--convert",r),style:u,children:[(0,e.jsxs)("div",{className:"dtc__aigc__codeblock__header",children:[(0,e.jsx)("span",{className:"dtc__aigc__codeblock__language",children:$.toLocaleLowerCase()}),(0,e.jsxs)("div",{className:"dtc__aigc__codeblock__tool",children:[!V.disabled&&(0,e.jsx)(q.Z,v()({text:me},V.options)),typeof d=="function"?d():d]})]}),(0,e.jsx)(ve.Z,v()(v()({language:$.toLocaleLowerCase(),wrapLines:!0,style:v()(v()({},S.Yn),{},{'code[class*="language-"]':v()(v()({},S.Yn['code[class*="language-"]']),{},{background:p?"#F9F9FA":"#fff"}),'pre[class*="language-"]':v()(v()({},S.Yn['pre[class*="language-"]']),{},{background:p?"#F9F9FA":"#fff",margin:0,overflow:"auto",maxHeight:270,borderRadius:"0 0 4px 4px"})}),lineNumberStyle:v()({fontStyle:"normal"},M),showLineNumbers:!0},J),{},{children:me}))]})}var R=n(48305),C=n.n(R),j=n(65225),L=n(95916),H=n(71837),ee=n(26384),z=n(51080),D=n(18704),he=n(64592);function b(t){return t.loading?(0,e.jsxs)("div",{className:"dtc__aigc__loading",children:[(0,e.jsx)("div",{}),(0,e.jsx)("div",{}),(0,e.jsx)("div",{})]}):(0,e.jsx)(e.Fragment,{children:t.children})}var ae=n(15558),ne=n.n(ae),ce=n(98602),ye=n(99216),De=n(42657),Fe=["typing","className","rehypePlugins","remarkPlugins","codeBlock","components","children","onMount"],We=["src"],be=(0,f.memo)(function(r){var u=r.typing,d=r.className,a=r.rehypePlugins,p=a===void 0?[]:a,y=r.remarkPlugins,P=y===void 0?[]:y,U=r.codeBlock,A=r.components,M=r.children,J=r.onMount,w=g()(r,Fe);return(0,f.useEffect)(function(){J==null||J()},[]),(0,e.jsx)(ce.D,v()(v()({className:I()("dtc__aigc__markdown",u&&"dtc__aigc__markdown--blink",d),rehypePlugins:p,remarkPlugins:[ye.Z].concat(ne()(P)),components:v()({code:function($){var V=$.children;return(0,e.jsx)("code",{className:"dtc__aigc__markdown__inlineCode",children:V})},pre:function($){var V=$.children;return(0,e.jsx)(_,v()(v()({},U),{},{children:V}))},hr:function(){return(0,e.jsx)("hr",{color:"#ebecf0",className:"dtc__aigc__markdown__hr"})},p:function($){return $.node.children.every(function(V){return V.type==="text"})?(0,e.jsx)("p",{children:$.children}):(0,e.jsx)("div",{children:$.children})},img:function($){var V=$.src,me=g()($,We);return(0,e.jsx)(De.Z,v()({className:"dtc__aigc__markdown__img",src:V},me))}},A),includeElementIndex:!0},w),{},{children:M}))},function(t,r){return!(t.typing!==r.typing||t.className!==r.className||t.children!==r.children||t.codeBlock!==r.codeBlock)});function Se(t){var r=t.current,u=t.total,d=t.onChange,a=t.style,p=t.disabled,y=r===1||p,P=r===u||p;return(0,e.jsxs)("div",{className:"dt-aigc-pagination",style:a,children:[(0,e.jsx)(D.LeftOutlined,{className:y?"arrow-disabled":"",onClick:function(){y||d(r-1)},"data-testid":"icon-left"}),(0,e.jsxs)("section",{children:[(0,e.jsx)("span",{children:r}),(0,e.jsx)("span",{children:"/"}),(0,e.jsx)("span",{children:u})]}),(0,e.jsx)(D.RightOutlined,{className:P?"arrow-disabled":"",onClick:function(){P||d(r+1)},"data-testid":"icon-right"})]})}var Be=f.createContext({chat:void 0,maxRegenerateCount:5});function Re(){return f.useContext(Be)}var Ge=["formatText"];function Le(t){var r=t.prompt,u=t.data,d=t.regenerate,a=t.copy,p=t.onRegenerate,y=t.onStop,P=t.onLazyRendered,U=(0,he.Z)(_e),A=Re(),M=A.components,J=M===void 0?{}:M,w=A.messageIcons,x=A.codeBlock,$=A.rehypePlugins,V=A.remarkPlugins,me=(0,f.useState)(!1),ge=C()(me,2),fe=ge[0],xe=ge[1],pe=(0,f.useRef)(function(){});function _e(se){var de=C()(se,1),Ce=de[0];Ce.isIntersecting&&xe(function(je){if(!je){var Ie=function(){return new Promise(function(hn){pe.current=hn})};P==null||P(Ie)}return!0})}var Y=(0,f.useState)(u.length),K=C()(Y,2),te=K[0],F=K[1],N=u[te-1],l=(0,f.useMemo)(function(){return N?[N.status===j.rJ.GENERATING,N.status===j.rJ.PENDING,N.status===j.rJ.STOPPED]:[!1,!1,!1]},[N]),s=C()(l,3),o=s[0],c=s[1],h=s[2];(0,f.useEffect)(function(){F(u.length)},[u.length]);var O=(0,f.useMemo)(function(){return Object.keys(J).reduce(function(se,de){var Ce=J[de];return se[de]=function(){for(var je=arguments.length,Ie=new Array(je),Ee=0;Ee<je;Ee++)Ie[Ee]=arguments[Ee];return typeof Ce=="function"?Ce.apply(void 0,Ie.concat([{messageId:N==null?void 0:N.id,promptId:r.id}])):Ce},se},{})},[J,N==null?void 0:N.id]),re=(0,f.useMemo)(function(){return typeof a=="boolean"?{disabled:!a,options:{}}:{disabled:!1,options:v()({},a||{})}},[a]),W=function(){var de;if(re.disabled)return null;var Ce=re.options,je=Ce.formatText,Ie=g()(Ce,Ge),Ee=(de=je==null?void 0:je(N==null?void 0:N.content))!==null&&de!==void 0?de:N==null?void 0:N.content;return Ee?(0,e.jsx)(q.Z,v()({className:"dtc__message__icon",button:(0,e.jsx)(D.CopyOutlined,{}),text:Ee},Ie)):null};return(0,e.jsxs)("section",{className:"dtc__message__container",children:[(0,e.jsx)("div",{className:"dtc__message__avatar",children:(0,e.jsx)(D.AiAvatarColored,{})}),(0,e.jsxs)("div",{className:"dtc__message__wrapper",children:[(0,e.jsxs)("div",{className:I()("dtc__message__content",c&&"dtc__message__content--loading"),ref:U,children:[(0,e.jsx)(b,{loading:c,children:fe&&(0,e.jsx)(be,{typing:o,components:O,codeBlock:x,rehypePlugins:$,remarkPlugins:V,onMount:function(){pe.current()},children:N==null?void 0:N.content})}),(0,e.jsxs)("div",{className:"dtc__message__footer",children:[u.length>1&&!o&&!c&&(0,e.jsx)(Se,{current:te,total:u.length,onChange:function(de){return F(de)}}),h&&(0,e.jsx)("span",{className:"dtc__message__stopText",children:"\u56DE\u7B54\u5DF2\u505C\u6B62"})]})]}),(o||c)&&(0,e.jsx)("div",{className:"dtc__message__extra",children:(0,e.jsx)(ue.default,{type:"link",className:"dtc__message__stopBtn",onClick:function(){return y==null?void 0:y(N)},icon:(0,e.jsx)(D.PauseOutlined,{style:{verticalAlign:"sub"}}),children:"\u505C\u6B62\u56DE\u7B54"})})]}),!o&&!c&&(0,e.jsxs)(H.default,{className:"dtc__message__iconGroup",align:"center",children:[W(),typeof w=="function"?w(N,r):w,d&&(0,e.jsx)(z.default,{title:"\u91CD\u65B0\u751F\u6210",getTooltipContainer:function(de){return de.parentNode},children:(0,e.jsx)("span",{className:"dtc__message__icon",onClick:function(){return p==null?void 0:p(N)},children:(0,e.jsx)(D.ReloadOutlined,{})})})]})]})}function Ue(t){var r=t.data,u=t.className,d=Re(),a=d.components,p=a===void 0?{}:a,y=d.codeBlock,P=(0,f.useMemo)(function(){return Object.keys(p).reduce(function(U,A){var M=p[A];return U[A]=function(){for(var J=arguments.length,w=new Array(J),x=0;x<J;x++)w[x]=arguments[x];return typeof M=="function"?M.apply(void 0,w.concat([{promptId:r==null?void 0:r.id}])):M},U},{})},[p,r==null?void 0:r.id]);return r!=null&&r.title?(0,e.jsx)("section",{className:I()("dtc__prompt__container",u),children:(0,e.jsx)("div",{className:"dtc__prompt__wrapper",children:(0,e.jsx)("div",{className:"dtc__prompt__content",children:(0,e.jsx)(be,{codeBlock:y,components:P,children:(r==null?void 0:r.title)||""})})})}):null}var Ke=(0,f.forwardRef)(function(t,r){var u,d=t.data,a=t.placeholder,p=t.scrollable,y=p===void 0?!0:p,P=t.onRegenerate,U=t.onStop,A=Re(),M=A.maxRegenerateCount,J=A.copy,w=A.regenerate,x=(0,f.useRef)(null),$=(0,f.useState)(!0),V=C()($,2),me=V[0],ge=V[1],fe=(0,f.useRef)(0);(0,f.useImperativeHandle)(r,function(){return{nativeElement:x.current,scrollToBottom:function(){fe.current=window.requestAnimationFrame(function(){var te,F;(te=x.current)===null||te===void 0||te.scrollTo({top:(F=x.current)===null||F===void 0?void 0:F.scrollHeight,left:0,behavior:"instant"})})}}});var xe=function(){if(!x.current)return!1;var te=5,F=x.current,N=F.scrollTop,l=F.clientHeight,s=F.scrollHeight;return N+l>=s-te},pe=!!(Array.isArray(d)&&d.length),_e=d[d.length-1],Y=pe?(u=_e.messages)===null||u===void 0?void 0:u[_e.messages.length-1]:void 0;return(0,f.useLayoutEffect)(function(){var K,te=function(){x.current&&ge(xe())};return(K=x.current)===null||K===void 0||K.addEventListener("scroll",te),function(){var F;(F=x.current)===null||F===void 0||F.removeEventListener("scroll",te),window.cancelAnimationFrame(fe.current)}},[]),(0,f.useLayoutEffect)(function(){fe.current=window.requestAnimationFrame(function(){x.current&&(pe?x.current.scrollTop=x.current.scrollHeight:x.current.scrollTop=0)})},[Y==null?void 0:Y.id]),(0,f.useLayoutEffect)(function(){fe.current=window.requestAnimationFrame(function(){x.current&&(Y==null?void 0:Y.status)===j.rJ.GENERATING&&me&&(x.current.scrollTop=x.current.scrollHeight)})},[Y==null?void 0:Y.status,Y==null?void 0:Y.content,me]),(0,e.jsx)("div",{className:I()("dtc__aigc__content__container",!y&&"dtc__aigc__content__container--disabled"),ref:x,children:pe?(0,e.jsx)("div",{className:"dtc__aigc__content__inner__holder",children:d.map(function(K,te){var F=te===d.length-1&&K.messages.length<M;return(0,e.jsxs)(f.Fragment,{children:[(0,e.jsx)(Ue,{data:K}),(0,e.jsx)(Le,{prompt:K,data:K.messages,regenerate:typeof w=="function"?w(K,te,d):w!=null?w:F,copy:J,onRegenerate:function(l){return P==null?void 0:P(l,K)},onStop:function(l){return U==null?void 0:U(l,K)},onLazyRendered:function(l){var s=xe();l().then(function(){window.requestAnimationFrame(function(){ge(s),s&&x.current&&(x.current.scrollTop=x.current.scrollHeight)})})}})]},K.id)})}):(0,e.jsx)(f.Fragment,{children:a})})}),we=Ke,yn=n(36462),Ze=n(78448),ze=["className"],Je=["className"];function He(t){var r=t.className,u=g()(t,ze);return(0,e.jsx)("span",v()(v()({className:I()("dtc__icon",r)},u),{},{children:(0,e.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",children:[(0,e.jsx)("path",{fill:"url(#paint0_linear_3878_6538)",fillRule:"evenodd",d:"M17.999 3.858 3.35 9.204a1.66 1.66 0 0 0-1.095 1.458 1.66 1.66 0 0 0 .862 1.602l4.454 2.44c.27.143.593.098.808-.118l.737-.72 4.508-4.428a.677.677 0 0 1 .952.018c.26.261.26.693-.009.954l-4.562 4.473-.61.603a.68.68 0 0 0-.118.828l2.64 4.626c.315.513.845.81 1.429.81.063 0 .117 0 .18-.009a1.68 1.68 0 0 0 1.41-1.107L20.153 6a1.69 1.69 0 0 0-.404-1.764 1.64 1.64 0 0 0-1.751-.378",clipRule:"evenodd"}),(0,e.jsx)("defs",{children:(0,e.jsxs)("linearGradient",{id:"paint0_linear_3878_6538",x1:"2.25",x2:"23.921",y1:"3.75",y2:"11.552",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#00BAC6"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#0067FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#450FDE"})]})}),(0,e.jsx)("defs",{children:(0,e.jsxs)("linearGradient",{id:"paint0_linear_3878_6538_hover",x1:"2.25",x2:"23.921",y1:"3.75",y2:"11.552",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#08C4FF"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#4892FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#8A61FF"})]})})]})}))}var Ve=function(r){var u=r.className,d=g()(r,Je);return(0,e.jsx)("span",v()(v()({className:I()("dtc__icon",u)},d),{},{children:(0,e.jsxs)("svg",{width:"1em",height:"1em",viewBox:"0 0 6 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,e.jsx)("path",{d:"M0 3C0 1.34315 1.34315 0 3 0C4.65685 0 6 1.34315 6 3C6 4.65685 4.65685 6 3 6C1.34315 6 0 4.65685 0 3Z",fill:"url(#paint0_linear_5253_12831)"}),(0,e.jsx)("circle",{cx:"3",cy:"3",r:"3",fill:"url(#paint1_linear_5253_12831)"}),(0,e.jsxs)("defs",{children:[(0,e.jsxs)("linearGradient",{id:"paint0_linear_5253_12831",x1:"0",y1:"0",x2:"7.2238",y2:"2.60057",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#08C4FF"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#4892FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#8A61FF"})]}),(0,e.jsxs)("linearGradient",{id:"paint1_linear_5253_12831",x1:"0",y1:"0",x2:"7.2238",y2:"2.60057",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#08C4FF"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#4892FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#8A61FF"})]})]})]})}))},Ye=["onChange","onPressEnter","onPressShiftEnter","onSubmit","button","className"];function Xe(t){var r=t.onChange,u=t.onPressEnter,d=t.onPressShiftEnter,a=t.onSubmit,p=t.button,y=t.className,P=g()(t,Ye),U=function(M){r==null||r(M.target.value)};return(0,e.jsxs)("div",{className:"dtc__chat__textarea__container",children:[(0,e.jsx)(Ze.default.TextArea,v()(v()({className:I()("dtc__chat__textarea",y)},P),{},{onChange:U,onPressEnter:function(M){M.persist(),M.preventDefault(),M.shiftKey?(r==null||r(P.value+`
`),d==null||d(M)):u==null||u(M)},autoSize:{minRows:2,maxRows:7}})),p!=null&&p.disabled?(0,e.jsx)(D.SendFilled,{disabled:!0,className:"dtc__chat__textarea__send"}):(0,e.jsx)(He,{className:I()("dtc__chat__textarea__send"),onClick:function(){return a==null?void 0:a(P.value)}})]})}var Qe=["className","children"],ke=function(r){var u=r.className,d=r.children,a=g()(r,Qe);return(0,e.jsxs)("div",v()(v()({className:I()("dtc__tag",u)},a),{},{children:[(0,e.jsx)(Ve,{className:"dtc__tag__icon"}),d]}))},qe=ke,en=n(90228),$e=n.n(en),nn=n(87999),tn=n.n(nn),rn=n(17069),Oe=n.n(rn),sn=n(25298),Te=n.n(sn),an=n(21742),Ae=n.n(an),on=n(83136),Me=n.n(on),Ne=n(53594),ln=n(61049),un=function(t){Ae()(u,t);var r=Me()(u);function u(){return Te()(this,u),r.apply(this,arguments)}return Oe()(u)}(j.ri),cn=function(t){Ae()(u,t);var r=Me()(u);function u(){return Te()(this,u),r.apply(this,arguments)}return Oe()(u)}(j.NL),dn=function(t){Ae()(u,t);var r=Me()(u);function u(){return Te()(this,u),r.apply(this,arguments)}return Oe()(u)}(j.v0),vn=function(r){return(r+1)%1e6};function mn(t){var r=(0,f.useReducer)(vn,0),u=C()(r,2),d=u[1],a=(0,f.useRef)(void 0),p=(0,ln.Z)({onTyping:function(s){_e(y.current.promptId,y.current.messageId,{content:s})}}),y=(0,f.useRef)({promptId:"",messageId:""}),P=(0,f.useRef)(!1);function U(l,s){p.start(),_e(l,s,{status:j.rJ.PENDING}),y.current={promptId:l,messageId:s}}function A(l,s,o){if(l===y.current.promptId&&s===y.current.messageId){var c;p.push(o),((c=Y(l,s))===null||c===void 0?void 0:c.status)!==j.rJ.GENERATING&&_e(l,s,{status:j.rJ.GENERATING})}}function M(l,s){P.current=!0,p.close().then(function(){P.current=!1,_e(l,s,{status:j.rJ.DONE})})}function J(l){var s,o=(t==null||(s=t.ctor)===null||s===void 0?void 0:s.Conversation)||un;a.current=new o(l),d()}function w(){a.current=void 0,d()}function x(l){a.current&&(a.current=(0,Ne.Uy)(a.current,function(s){Object.assign(s,l)}),d())}function $(){return a.current}function V(){for(var l,s=arguments.length,o=new Array(s),c=0;c<s;c++)o[c]=arguments[c];if(a.current){var h=(t==null||(l=t.ctor)===null||l===void 0?void 0:l.Prompt)||cn;a.current=(0,Ne.Uy)(a.current,function(O){var re;(re=O.prompts)===null||re===void 0||re.push(new h(o[0]))}),d()}}function me(l){a.current&&(a.current=(0,Ne.Uy)(a.current,function(s){var o,c,h=(o=s.prompts)===null||o===void 0?void 0:o.findIndex(function(O){return O.id===l});h!==-1&&((c=s.prompts)===null||c===void 0||c.splice(h,1))}),d())}function ge(l,s){a.current&&(a.current=(0,Ne.Uy)(a.current,function(o){var c=o.prompts.find(function(h){return h.id===l});c&&(typeof s=="function"?Object.assign(c,s(c)):Object.assign(c,s))}),d())}function fe(l){var s;return(s=a.current)===null||s===void 0||(s=s.prompts)===null||s===void 0?void 0:s.find(function(o){return typeof l=="function"?l(o):o.id===l})}function xe(l){for(var s,o=arguments.length,c=new Array(o>1?o-1:0),h=1;h<o;h++)c[h-1]=arguments[h];if(a.current){var O=(t==null||(s=t.ctor)===null||s===void 0?void 0:s.Message)||dn;a.current=(0,Ne.Uy)(a.current,function(re){var W=re.prompts.find(function(se){return se.id===l});W&&W.messages.push(new O(c[0]))}),d()}}function pe(l,s){a.current&&(a.current=(0,Ne.Uy)(a.current,function(o){var c,h,O=o.prompts.find(function(W){return W.id===l});if(O){var re=(c=O.messages)===null||c===void 0?void 0:c.findIndex(function(W){return W.id===s});re!==-1&&((h=O.messages)===null||h===void 0||h.splice(re,1))}}),d())}function _e(l,s,o,c){a.current&&(a.current=(0,Ne.Uy)(a.current,function(h){var O,re=h.prompts.find(function(se){return se.id===l}),W=re==null||(O=re.messages)===null||O===void 0?void 0:O.find(function(se){return se.id===s});W&&(typeof o=="function"?Object.assign(W,o(W)):Object.assign(W,o))}),c!==!1&&d())}function Y(l,s){var o;return(o=a.current)===null||o===void 0||(o=o.prompts)===null||o===void 0||(o=o.find(function(c){return c.id===l}))===null||o===void 0||(o=o.messages)===null||o===void 0?void 0:o.find(function(c){return c.id===s})}function K(){var l,s,o,c=(l=a.current)===null||l===void 0||(l=l.prompts)===null||l===void 0?void 0:l[((s=a.current)===null||s===void 0?void 0:s.prompts.length)-1],h=c==null||(o=c.messages)===null||o===void 0?void 0:o[c.messages.length-1];return h?h.status===j.rJ.PENDING||h.status===j.rJ.GENERATING:!1}function te(){return F.apply(this,arguments)}function F(){return F=tn()($e()().mark(function l(){var s,o,c,h,O;return $e()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(h=(s=a.current)===null||s===void 0||(s=s.prompts)===null||s===void 0?void 0:s[((o=a.current)===null||o===void 0?void 0:o.prompts.length)-1],O=h==null||(c=h.messages)===null||c===void 0?void 0:c[h.messages.length-1],(O==null?void 0:O.status)!==j.rJ.GENERATING){W.next=8;break}return W.next=5,p.close(!0);case 5:P.current&&_e(h.id,O.id,{status:j.rJ.DONE}),W.next=9;break;case 8:p.stop();case 9:return W.abrupt("return",$());case 10:case"end":return W.stop()}},l)})),F.apply(this,arguments)}function N(l){if(a.current=l,P.current=!1,K()){var s,o,c=$(),h=c==null||(s=c.prompts)===null||s===void 0?void 0:s[(c==null?void 0:c.prompts.length)-1],O=h==null||(o=h.messages)===null||o===void 0?void 0:o[h.messages.length-1];if(!h||!O)return a.current;p.start(O.content),y.current={promptId:h.id,messageId:O.id}}return d(),a.current}return{conversation:{create:J,remove:w,update:x,get:$},prompt:{create:V,remove:me,update:ge,get:fe},message:{create:xe,remove:pe,update:_e,get:Y},loading:K,start:U,push:A,close:M,stop:p.stop,isTyping:p.isTyping,saveViewState:te,restoreViewState:N}}var fn=n(46302);function _n(t){var r=t.icon,u=r===void 0?(0,e.jsx)(D.AiAvatarColored,{style:{fontSize:24}}):r,d=t.title,a=t.description,p=t.className,y=t.style;return(0,e.jsx)("div",{className:I()("dtc__welcome",p),style:y,children:(0,e.jsxs)("div",{className:"dtc__welcome__content",children:[(0,e.jsxs)(fn.Z,{gap:8,align:"center",children:[u,(0,e.jsx)("span",{className:"dtc__welcome__title",children:d})]}),(0,e.jsx)("div",{className:"dtc__welcome__description",children:a})]})})}var gn=5;function ie(t){var r=t.chat,u=t.components,d=t.maxRegenerateCount,a=d===void 0?gn:d,p=t.regenerate,y=t.copy,P=t.codeBlock,U=t.messageIcons,A=t.rehypePlugins,M=t.remarkPlugins,J=t.children;return(0,e.jsx)(Be.Provider,{value:{chat:r,components:u,maxRegenerateCount:a,copy:y,codeBlock:P,messageIcons:U,regenerate:p,rehypePlugins:A,remarkPlugins:M},children:J})}ie.useChat=mn,ie.useContext=Re,ie.Loading=b,ie.Button=k,ie.CodeBlock=_,ie.Input=Xe,ie.Markdown=be,ie.Pagination=Se,ie.Message=Le,ie.Prompt=Ue,ie.Content=we,ie.Tag=qe,ie.Welcome=_n;var pn=ie},5909:function(Pe,le,n){n.d(le,{Z:function(){return k}});var f=n(26068),Z=n.n(f),v=n(26384),oe=n(51080),ue=n(30629),E=n(11167),g=n(75271),X=n(29520),Q=n(18704),I=n(82187),e=n.n(I),i=n(38323),m=n(50798),G=n(52676),T=function(S){var q=(0,i.Z)("Copy"),B=S.button,_=B===void 0?(0,G.jsx)(Q.CopyOutlined,{className:"dt-copy__default-icon"}):B,R=S.text,C=S.tooltip,j=C===void 0?q.copy:C,L=S.style,H=S.className,ee=S.disabled,z=ee===void 0?!1:ee,D=S.onCopy,he=D===void 0?function(){return E.default.success(q.copied)}:D,b=function(){z||new X.X0().copy(R,function(){return he(R)})},ae=function(){return(0,G.jsx)("span",{className:e()(["dt-copy",{"dt-copy--disabled":z},H]),style:L,onClick:function(){return b()},children:_})},ne=(0,m.Z)(j);return(0,G.jsx)(oe.default,Z()(Z()({},ne),{},{children:ae()}))},k=T},46302:function(Pe,le,n){n.d(le,{Z:function(){return I}});var f=n(26068),Z=n.n(f),v=n(67825),oe=n.n(v),ue=n(75271),E=n(82187),g=n.n(E),X=n(52676),Q=["className","vertical","wrap","justify","align","flex","gap","style","children"],I=(0,ue.forwardRef)(function(i,m){var G=i.className,T=i.vertical,k=T===void 0?!1:T,ve=i.wrap,S=ve===void 0?"nowrap":ve,q=i.justify,B=q===void 0?"normal":q,_=i.align,R=_===void 0?"normal":_,C=i.flex,j=C===void 0?"normal":C,L=i.gap,H=L===void 0?0:L,ee=i.style,z=i.children,D=oe()(i,Q);return(0,X.jsx)("section",Z()(Z()({className:g()("dt-flex",G,k&&"dt-flex__vertical"),style:Z()({flexWrap:S,justifyContent:B,alignItems:R,flex:j,gap:H},ee),ref:m},D),{},{children:z}))})},42657:function(Pe,le,n){var f=n(16662),Z=n.n(f),v=n(46823),oe=n(67825),ue=n.n(oe),E=n(26068),g=n.n(E),X=n(48305),Q=n.n(X),I=n(75271),e=n(64592),i=n(52676),m=["src","className","style"],G=["src","className","style","loader"];function T(B){return new Promise(function(_,R){var C=new Image;C.onload=function(){return _(!0)},C.onerror=R,C.src=B})}function k(B){var _=B.src,R=I.useState(!0),C=Q()(R,2),j=C[0],L=C[1],H=I.useState(void 0),ee=Q()(H,2),z=ee[0],D=ee[1];return I.useEffect(function(){T(_).then(function(){L(!1),D(_)}).finally(function(){L(!1)})},[_]),{isLoading:j,src:z}}var ve=function(_){var R=_.lazy;return R?(0,i.jsx)(S,g()({},_)):(0,i.jsx)(q,g()({},_))},S=function(_){var R=_.src,C=_.className,j=_.style,L=ue()(_,m),H=(0,e.Z)(function(ee){var z=Q()(ee,1),D=z[0],he=D.target,b=D.isIntersecting;if(b){var ae,ne=he;ne.src=(ae=ne.dataset.src)!==null&&ae!==void 0?ae:"",ne.onload=function(){ne.style.opacity="1"}}});return(0,i.jsx)("img",g()(g()({className:C,style:j,ref:H},L),{},{"data-src":R}))},q=function(_){var R=_.src,C=_.className,j=_.style,L=_.loader,H=L===void 0?(0,i.jsx)(v.default,{spinning:!0}):L,ee=ue()(_,G),z=k({src:R}),D=z.src,he=z.isLoading;return D?(0,i.jsx)("img",g()(g()({},ee),{},{className:C,style:j,src:D})):he?H:null};le.Z=ve},64592:function(Pe,le,n){var f=n(48305),Z=n.n(f),v=n(75271),oe=function(E){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},X=(0,v.useRef)(null),Q=g.threshold,I=Q===void 0?0:Q,e=g.root,i=e===void 0?null:e,m=g.rootMargin,G=m===void 0?"0%":m,T=g.freezeOnceVisible,k=T===void 0?!1:T,ve=(0,v.useState)(),S=Z()(ve,2),q=S[0],B=S[1],_=(q==null?void 0:q.isIntersecting)&&k,R=function(j,L){B(j[0]),E(j,L)};return(0,v.useEffect)(function(){var C=X.current,j=!!window.IntersectionObserver;if(!(_||!C)){if(!j){var L,H,ee={boundingClientRect:(L=C.getBoundingClientRect())!==null&&L!==void 0?L:null,intersectionRatio:1,intersectionRect:(H=C.getBoundingClientRect())!==null&&H!==void 0?H:null,isIntersecting:!0,rootBounds:null,target:C,time:Date.now()};R([ee],null)}var z=new IntersectionObserver(R,{threshold:I,root:i,rootMargin:G});return z.observe(C),function(){return z.disconnect()}}},[JSON.stringify(I),i,G,_]),X};le.Z=oe},61049:function(Pe,le,n){n.d(le,{Z:function(){return Q}});var f=n(90228),Z=n.n(f),v=n(87999),oe=n.n(v),ue=n(48305),E=n.n(ue),g=n(75271),X=50;function Q(I){var e=I.onTyping,i=(0,g.useRef)(),m=(0,g.useRef)(""),G=(0,g.useRef)(1),T=(0,g.useRef)(0),k=(0,g.useRef)(!1),ve=(0,g.useState)(!1),S=E()(ve,2),q=S[0],B=S[1],_=(0,g.useRef)(!1),R=(0,g.useRef)(0);function C(){var b=m.current.length-T.current-1,ae=1e3/X;G.current=Math.ceil(b/ae)}function j(){var b=m.current.slice(T.current),ae=b.slice(0,G.current),ne=/<[a-zA-Z]{0,4}\s[^<]*>/;if(ne.test(b)&&!ne.test(ae)){var ce=b.match(ne),ye=ce[0],De=b.indexOf(ye);return T.current+De+ye.length}return T.current+G.current}function L(){i.current||(i.current=window.setInterval(function(){if(T.current<m.current.length){var b=m.current,ae=j(),ne=b.slice(0,ae);e(ne),T.current=ne.length}else k.current||(window.clearInterval(i.current),i.current=0,B(!1),_.current=!1)},X))}(0,g.useEffect)(function(){return function(){window.clearInterval(i.current),window.clearInterval(R.current),i.current=0}},[]);function H(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";k.current=!0,B(!0),window.clearInterval(i.current),i.current=0,m.current=b,T.current=b.length}function ee(b){k.current&&(b.startsWith("n")&&m.current.endsWith("\\")?m.current=m.current.slice(0,-1)+`
`+b.slice(1).replace(/\\n/g,`
`):m.current+=b.replace(/\\n/g,`
`),C(),L())}function z(b){return D.apply(this,arguments)}function D(){return D=oe()(Z()().mark(function b(ae){return Z()().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(!ae){ce.next=10;break}window.clearInterval(R.current),window.clearInterval(i.current),i.current=0,e(m.current),B(!1),_.current=!1,k.current=!1,ce.next=14;break;case 10:return k.current=!1,_.current=!0,window.clearInterval(R.current),ce.abrupt("return",new Promise(function(ye){i.current?R.current=window.setInterval(function(){_.current||(ye(),_.current=!0,window.clearInterval(R.current))},1e3):(ye(),_.current=!1,B(!1),window.clearInterval(R.current))}));case 14:case"end":return ce.stop()}},b)})),D.apply(this,arguments)}function he(){k.current=!1,B(!1),_.current=!1,i.current&&(window.clearInterval(i.current),i.current=0),m.current="",T.current=0}return{start:H,push:ee,close:z,stop:he,isTyping:q}}}}]);
